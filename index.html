<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard (Refined) | Disparidade de Gênero</title>
    <!-- 1. Carrega o Tailwind CSS -->f
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. Carrega o Chart.js (biblioteca de gráficos) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <!-- 3. Carrega o Leaflet CSS e JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <!-- 4. Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
    
    <style>
        /* --- TEMA LIGHT LILÁS & DESIGN SYSTEM --- */
        :root {
            /* Cores de Gênero */
            --color-mulheres: #fb7185; /* rose-400 */
            --color-mulheres-border: #f43f5e; /* rose-500 */
            --color-homens: #64748b; /* slate-500 */
            --color-homens-border: #475569; /* slate-600 */
            
            /* Cores do Tema */
            --color-accent: #8b5cf6; /* violet-500 */
            --color-accent-light: #a78bfa; /* violet-400 */
            --color-accent-shadow: rgba(139, 92, 246, 0.25); 
            --color-bg-body: #f5f3ff; /* violet-50 */
            --color-bg-sidebar: #ffffff; 
            --color-bg-card: #ffffff; 
            --color-border-card: #ede9fe; /* violet-100 */
            --color-border-divider: #ddd6fe; /* violet-200 */

            /* Cores de Texto */
            --color-text-primary: #1e293b; 
            --color-text-secondary: #475569; 
            --color-text-tertiary: #64748b; 
            --color-text-muted: #94a3b8; 
            
            /* KPI Colors */
            --color-kpi-negative: #ef4444; 
            --color-kpi-positive: #10b981; 
            --color-kpi-warning: #f59e0b; 
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--color-bg-body);
            color: var(--color-text-secondary);
        }

        /* --- Sidebar Styles --- */
        .sidebar-button {
            display: flex; align-items: center; gap: 0.75rem; width: 100%; text-align: left;
            transition: all 0.3s ease; cursor: pointer; padding: 0.75rem 1.5rem;
            border-left: 4px solid transparent; color: var(--color-text-tertiary);
            font-size: 0.95rem; font-weight: 500; border-radius: 0.5rem;
        }
        .sidebar-button:hover {
            color: var(--color-text-primary); background-color: rgba(0, 0, 0, 0.03);
        }
        .active-tab {
            border-left-color: var(--color-accent); color: var(--color-accent);
            font-weight: 600;
        }
        .sidebar-button svg {
            width: 1.25rem; height: 1.25rem; flex-shrink: 0; stroke: currentColor; stroke-width: 2; fill: none; transition: all 0.3s ease;
        }
        .active-tab svg { fill: var(--color-accent-shadow); stroke: var(--color-accent); }

        /* --- Card Styles --- */
        .kpi-card, .chart-card {
            background-color: var(--color-bg-card);
            border: 1px solid var(--color-border-card);
            border-radius: 1rem; /* Mais arredondado */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            padding: 1.5rem; transition: all 0.3s ease-in-out;
        }
        .kpi-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 20px -5px rgba(139, 92, 246, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-color: var(--color-accent-light);
        }
        
        /* --- Typography --- */
        .h1-title { font-size: 1.75rem; font-weight: 800; color: var(--color-text-primary); letter-spacing: -0.025em; }
        .h2-title { font-size: 1.875rem; font-weight: 700; color: var(--color-text-primary); letter-spacing: -0.025em; margin-bottom: 1.5rem; }
        .h3-title { font-size: 1.25rem; font-weight: 600; color: var(--color-text-secondary); margin-bottom: 1rem; }
        .kpi-title { font-size: 0.875rem; font-weight: 600; color: var(--color-text-tertiary); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em; }
        .kpi-value { font-size: 2.5rem; font-weight: 700; line-height: 1; }
        .kpi-subtitle { font-size: 0.8rem; color: var(--color-text-muted); margin-top: 0.5rem; font-weight: 400; }

        /* --- Animations --- */
        .kpi-value-animated { font-variant-numeric: tabular-nums; }
        .tab-panel { transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .tab-panel:not(.active-panel) { opacity: 0; display: none; }
        
        @keyframes fade-in-up { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .card-animate { animation: fade-in-up 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; opacity: 0; }
        
        .animated-gradient-text {
            background: linear-gradient(135deg, var(--color-text-primary) 0%, var(--color-accent) 50%, var(--color-mulheres) 100%);
            background-size: 200% 200%; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: gradient-flow 6s ease infinite;
        }
        @keyframes gradient-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .impact-glow {
            animation: fade-in-up 0.5s ease-out forwards;
            box-shadow: 0 0 0 1px var(--color-border-card), 0 10px 30px -5px rgba(139, 92, 246, 0.15);
        }

        /* --- Table Styles --- */
        .custom-table { width: 100%; border-collapse: separate; border-spacing: 0; }
        .custom-table th, .custom-table td { padding: 1rem; text-align: left; border-bottom: 1px solid var(--color-border-card); }
        .custom-table th { background-color: #f8fafc; font-weight: 600; color: var(--color-text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; position: sticky; top: 0; }
        .custom-table tbody tr:hover { background-color: #f5f3ff; transition: background-color 0.2s; }
        .custom-table td { color: var(--color-text-primary); font-size: 0.9rem; }
        .custom-table td:first-child { font-weight: 600; color: var(--color-accent); }
        
        .leaflet-container { border-radius: 1rem; z-index: 0; box-shadow: inset 0 0 20px rgba(0,0,0,0.05); }
        #dynamic-footer { background-color: var(--color-bg-card); border-top: 1px solid var(--color-border-card); padding: 1.5rem; color: var(--color-text-tertiary); font-size: 0.75rem; text-align: center; margin-top: auto; }

        /* ========================================= */
        /* ESTILOS ESPECÍFICOS DA HOME PAGE     */
        /* ========================================= */
        
        /* Fundo com Noise (Granulação) */
        .bg-noise {
            position: relative;
            background-color: #fdfbf7; /* Off-white quente */
            overflow: hidden;
        }
        .bg-noise::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 0;
        }

        /* Blobs Animados no Fundo */
        .blob {
            position: absolute;
            filter: blur(80px);
            z-index: 0;
            opacity: 0.6;
            animation: floatBlob 10s infinite ease-in-out alternate;
        }
        .blob-1 { top: -10%; right: -5%; width: 500px; height: 500px; background: #ddd6fe; border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%; animation-delay: 0s; }
        .blob-2 { bottom: -10%; left: -10%; width: 600px; height: 600px; background: #fce7f3; border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; animation-delay: -5s; }
        @keyframes floatBlob { 0% { transform: translate(0, 0) rotate(0deg); } 100% { transform: translate(30px, 50px) rotate(10deg); } }

        /* Texto Editorial */
        .font-editorial { font-family: 'Playfair Display', serif; }

        /* Cards de Navegação da Home */
        .nav-card {
            position: relative;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 1.5rem;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            z-index: 1;
        }
        .nav-card:hover {
            transform: translateY(-8px) scale(1.02);
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 20px 40px -10px rgba(139, 92, 246, 0.2);
            border-color: var(--color-accent);
        }
        .nav-card .icon-box {
            width: 3rem; height: 3rem;
            border-radius: 1rem;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 1rem;
            transition: transform 0.4s ease;
        }
        .nav-card:hover .icon-box { transform: scale(1.1) rotate(-5deg); }

    </style>
</head>
<body class="font-sans h-screen flex overflow-hidden bg-noise">

    <!-- Sidebar Overlay (Agora visível em todas as resoluções quando aberto) -->
    <div id="sidebar-overlay" onclick="toggleSidebar(false)" class="fixed inset-0 z-40 bg-slate-900/50 backdrop-blur-sm hidden transition-opacity"></div>

    <!-- Sidebar (Agora oculta por padrão em todas as resoluções) -->
    <aside id="sidebar" class="w-72 h-full p-6 flex flex-col flex-shrink-0 fixed top-0 left-0 z-50 bg-white/90 backdrop-blur-md border-r border-slate-100 transform -translate-x-full transition-transform duration-300 ease-in-out shadow-2xl">
        <header class="mb-10 px-2">
            <div class="flex items-center gap-3 mb-2">
                <div class="w-100 h-100">
                    <img src="./Sistema-Gráfico_ID-Genero-RJ_LOGO.png"></img>
                </div>
            </div>
            <p class="text-xs font-medium text-slate-400 uppercase tracking-wider pl-1">Painel de Monitoramento</p>
        </header>

        <nav id="tab-navigation" class="flex flex-col gap-1 flex-1 overflow-y-auto scrollbar-hide">
            <!-- HOME (Nova) -->
            <button class="sidebar-button active-tab" onclick="showTab('home', this)">
                <img class="w-7 h-7" src="./Sistema-Gráfico_ID-Genero-RJ_HOME.png"></img>
                <span>Apresentação</span>
            </button>
            
            <div class="my-4 border-t border-slate-100"></div>
            <p class="px-4 mb-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Indicadores</p>

            <!-- Visão Geral (Antigo Início) -->
            <button class="sidebar-button" onclick="showTab('visao-geral', this)">
                <img class="w-7 h-7" src="./Sistema-Gráfico_ID-Genero-RJ_LUPA-ROXA.png"></img>
                <span>Visão Geral</span>
            </button>
            <button class="sidebar-button" onclick="showTab('educacao', this)">
                <img class="w-7 h-7" src="./Sistema Gráfico_ID Genero RJ-19.png"></img>
                <span>Educação</span>
            </button>
            <button class="sidebar-button" onclick="showTab('saude', this)">
                <img class="w-7 h-7" src="./Sistema Gráfico_ID Genero RJ-15.png"></img>
                <span>Saúde</span>
            </button>
            <button class="sidebar-button" onclick="showTab('renda', this)">
                <img class="w-7 h-7" src="./Sistema Gráfico_ID Genero RJ-17.png"></img>
                <span>Emprego e Renda</span>
            </button>
            <button class="sidebar-button" onclick="showTab('jornada', this)">
                <img class="w-7 h-8" src="./Sistema-Gráfico_ID-Genero-RJ_CORAÇÃO-ROXO.png"></img>
                <span>Cuidado</span>
            </button>
            <button class="sidebar-button" onclick="showTab('poder', this)">
                <img class="w-7 h-7" src="./Sistema Gráfico_ID Genero RJ-12.png"></img>
                <span>Representação Feminina</span>
            </button>
            <button class="sidebar-button" onclick="showTab('lideranca', this)">
                <img class="w-7 h-7" src="./Sistema Gráfico_ID Genero RJ-13.png"></img>
                <span>Liderança e Gestão</span>
            </button>
            <button class="sidebar-button" onclick="showTab('mapa', this)">
                <img class="w-7 h-7" src="./Sistema Gráfico_ID Genero RJ-19.png"></img>
                <span>Mapa Político</span>
            </button>
            
            <div class="my-4 border-t border-slate-100"></div>
            
            <button class="sidebar-button" onclick="showTab('fontes', this)">
                <img class="w-7 h-7" src="./Sistema-Gráfico_ID-Genero-RJ_LAMPADA-ROXA.png"></img>
                <span>Violências de Gênero</span>
            </button>
        </nav>
    </aside>

    <!-- Top Bar (Agora visível em todas as resoluções) -->
    <div class="fixed top-0 left-0 right-0 h-16 bg-white/80 backdrop-blur-md border-b border-slate-200 z-30 flex items-center px-4 justify-between">
        <div class="flex items-center gap-4">
            <button onclick="toggleSidebar(true)" class="p-2 rounded-md text-slate-600 hover:bg-slate-100 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
                <img 
                    src="./Sistema-Gráfico_ID-Genero-RJ_LOGO.png" 
                    class="h-10 w-auto cursor-pointer object-contain hover:opacity-80 transition-opacity"
                    onclick="showTab('home', this)"
                    alt="Logo Sistema Gráfico"
                />
            <span id="mobile-title" class="font-bold text-lg text-slate-800 hidden sm:block">Apresentação</span>
        </div>
    </div>

    <!-- Main Content (Agora full-width em todas as resoluções) -->
    <main class="w-full h-full overflow-y-auto relative">
        <!-- Blobs de Fundo -->
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>

        <div id="main-content" class="relative z-10 p-4 pt-20 lg:p-10 lg:pt-24 min-h-full flex flex-col">

            <!-- ABA 0: HOME -->
            <div id="home" class="tab-panel active-panel opacity-100">
                <div class="max-w-5xl mx-auto">
                    <!-- Hero Section -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center mb-16 mt-4">
                        <div class="space-y-6 card-animate" style="animation-delay: 100ms;">
                            <div class="inline-flex items-center px-3 py-1 rounded-full bg-violet-100 text-violet-600 text-xs font-bold tracking-wide uppercase">
                                Monitoramento 2025
                            </div>
                            <h1 class="font-editorial text-4xl md:text-5xl lg:text-6xl text-slate-800 leading-tight">
                                A realidade da mulher fluminense em <span class="text-transparent bg-clip-text bg-gradient-to-r from-violet-600 to-fuchsia-500">dados.</span>
                            </h1>
                            <p class="text-lg text-slate-600 leading-relaxed">
                                Uma plataforma integrada para monitorar, analisar e combater as desigualdades de gênero no estado do Rio de Janeiro. Explore indicadores de renda, trabalho, saúde e poder.
                            </p>
                            <div class="flex flex-wrap gap-4 pt-2">
                                <button onclick="showTab('visao-geral', document.querySelectorAll('.sidebar-button')[1])" class="px-8 py-4 rounded-xl bg-slate-900 text-white font-medium shadow-xl shadow-slate-200 hover:bg-slate-800 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300">
                                    Explorar os Dados
                                </button>
                            </div>
                        </div>
                        
                        <!-- Ilustração SVG Customizada -->
                        <div class="relative card-animate hidden lg:block" style="animation-delay: 300ms;">
                            <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg" class="w-full h-auto drop-shadow-xl transform hover:scale-105 transition-transform duration-700">
                                <defs>
                                    <linearGradient id="gradRef" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#e0c3fc;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#8ec5fc;stop-opacity:1" />
                                    </linearGradient>
                                    
                                    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
                                        <feDropShadow dx="2" dy="4" stdDeviation="3" flood-color="#000" flood-opacity="0.15"/>
                                    </filter>
                                </defs>

                                <circle cx="250" cy="250" r="180" fill="none" stroke="#f472b6" stroke-width="2" stroke-dasharray="8,12" opacity="0.4">
                                    <animateTransform attributeName="transform" type="rotate" from="0 250 250" to="360 250 250" dur="120s" repeatCount="indefinite"/>
                                </circle>

                                <circle cx="250" cy="250" r="150" fill="url(#gradRef)" opacity="0.1" />

                                <rect x="170" y="240" width="45" height="110" rx="6" fill="#75869c" filter="url(#shadow)">
                                    <animate attributeName="height" values="110;115;110" dur="5s" repeatCount="indefinite"/>
                                    <animate attributeName="y" values="240;235;240" dur="5s" repeatCount="indefinite"/>
                                </rect>

                                <rect x="235" y="190" width="45" height="160" rx="6" fill="#fa7089" filter="url(#shadow)">
                                    <animate attributeName="height" values="160;165;160" dur="5s" repeatCount="indefinite" begin="0.2s"/>
                                    <animate attributeName="y" values="190;185;190" dur="5s" repeatCount="indefinite" begin="0.2s"/>
                                </rect>

                                <rect x="300" y="150" width="45" height="200" rx="6" fill="#8b5cf6" filter="url(#shadow)">
                                    <animate attributeName="height" values="200;205;200" dur="5s" repeatCount="indefinite" begin="0.4s"/>
                                    <animate attributeName="y" values="150;145;150" dur="5s" repeatCount="indefinite" begin="0.4s"/>
                                </rect>

                                <image 
                                    href="./Sistema Gráfico_ID Genero RJ-23.png" 
                                    x="345" 
                                    y="100" 
                                    width="70" 
                                    height="70" 
                                    opacity="0.9"
                                >
                                    <animate attributeName="y" values="100;90;100" dur="4s" repeatCount="indefinite" begin="1s"/>
                                </image>

                            </svg>
                        </div>
                    </div>

                    <!-- Grid de Navegação (Como Funciona) -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                        <div onclick="showTab('educacao', document.querySelectorAll('.sidebar-button')[2])" class="nav-card p-6 cursor-pointer group">
                            <div class="icon-box bg-violet-100 text-violet-600">
                                <img class="w-7 h-7" src="./Sistema Gráfico_ID Genero RJ-19.png"></img>
                            </div>
                            <h3 class="font-bold text-lg text-slate-800 mb-2 group-hover:text-violet-600 transition-colors">Educação</h3>
                            <p class="text-sm text-slate-600">Analise o paradoxo da qualificação: mulheres estudam mais, mas o retorno salarial não acompanha.</p>
                        </div>

                        <div onclick="showTab('renda', document.querySelectorAll('.sidebar-button')[3])" class="nav-card p-6 cursor-pointer group">
                            <div class="icon-box bg-rose-100 text-rose-600">
                                <img class="w-7 h-7" src="./Sistema Gráfico_ID Genero RJ-17.png"></img>
                            </div>
                            <h3 class="font-bold text-lg text-slate-800 mb-2 group-hover:text-rose-600 transition-colors">Trabalho & Renda</h3>
                            <p class="text-sm text-slate-600">Visualize a disparidade salarial, a taxa de ocupação e a barreira da informalidade.</p>
                        </div>

                        <div onclick="showTab('poder', document.querySelectorAll('.sidebar-button')[5])" class="nav-card p-6 cursor-pointer group">
                            <div class="icon-box bg-emerald-100 text-emerald-600">
                                <img class="w-7 h-7" src="./Sistema Gráfico_ID Genero RJ-12.png"></img>
                            </div>
                            <h3 class="font-bold text-lg text-slate-800 mb-2 group-hover:text-emerald-600 transition-colors">Poder & Decisão</h3>
                            <p class="text-sm text-slate-600">Monitore a representatividade feminina nos cargos eletivos e de liderança no estado.</p>
                        </div>
                    </div>
                    
                </div>
            </div>

            <!-- ABA 1: Visão Geral -->
            <div id="visao-geral" class="tab-panel">
                <div class="chart-card mb-8 card-animate"> 
                    <h2 class="text-2xl font-semibold text-slate-800 mb-3">Visão Geral dos Indicadores</h2>
                    <p class="text-slate-600 leading-relaxed">
                        Um panorama consolidado dos principais desafios enfrentados pelas mulheres no Rio de Janeiro, abrangendo renda, trabalho, educação e representatividade política.
                    </p>
                </div>

                <!-- KPIs Principais -->
                <h2 class="h2-title card-animate" style="animation-delay: 100ms;">Destaques (2022-2025)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="kpi-card card-animate impact-glow" style="animation-delay: 200ms;">
                        <h3 class="kpi-title">Diferença no Rendimento</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="-24.4" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">Rendimento das mulheres vs homens (2º tri 2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;">
                        <h3 class="kpi-title">Diferença em Afazeres (sem)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="7.6" data-prefix="+" data-suffix="h">+0,0h</p>
                        <p class="kpi-subtitle">Horas a mais dedicadas por mulheres (2022)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 400ms;">
                        <h3 class="kpi-title">Taxa de Ocupação (2º tri 2025)</h3>
                        <div class="flex items-baseline gap-4 mt-2">
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-mulheres);">M:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-mulheres);" data-value="52.5" data-suffix="%">0,0%</p></div>
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-homens);">H:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-homens);" data-value="72.4" data-suffix="%">0,0%</p></div>
                        </div>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 500ms;">
                        <h3 class="kpi-title">Gap no Ensino Superior (18-24)</h3>
                        <div class="flex items-baseline gap-4 mt-2">
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-mulheres);">M:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-mulheres);" data-value="31.5" data-suffix="%">0,0%</p></div>
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-homens);">H:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-homens);" data-value="23.0" data-suffix="%">0,0%</p></div>
                        </div>
                    </div>
                </div>

                <!-- Contexto Estrutural -->
                <h2 class="h2-title card-animate" style="animation-delay: 600ms;">Contexto Estrutural e Tendências</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 700ms;">
                        <h3 class="kpi-title">Gap na Força de Trabalho</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="-895" data-suffix=" mil">-0 mil</p>
                        <p class="kpi-subtitle">Mulheres a menos no mercado (2º tri 2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 800ms;">
                        <h3 class="kpi-title">Diferença Afazeres (Não Ocupadas)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="8.3" data-prefix="+" data-suffix="h">+0,0h</p>
                        <p class="kpi-subtitle">Horas a mais p/ mulheres *fora* do mercado</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 900ms;">
                        <h3 class="kpi-title">Aumento do Gap Salarial</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="235" data-prefix="+R$ ">+R$ 0</p>
                        <p class="kpi-subtitle">Aumento da diferença (2T 2023-2T 2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 1000ms;">
                        <h3 class="kpi-title">Prefeitas no RJ (2025)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="15.2" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">Apenas 14 de 92 prefeituras</p>
                    </div>
                </div>
                
                <!-- Gráfico de Evolução da População Feminina -->
                <div class="chart-card card-animate mb-8" style="animation-delay: 1100ms;">
                    <h3 class="h3-title">Evolução da População Feminina Residente (Estimada)</h3>
                    <div class="h-[300px] relative">
                        <canvas id="populacaoFemininaChart"></canvas>
                    </div>
                </div>

                <!-- Tabela de População por Grupo Etário -->
                <div class="chart-card card-animate" style="animation-delay: 1200ms;">
                    <h3 class="h3-title">Detalhamento Demográfico: Mulheres por Faixa Etária (Mil pessoas)</h3>
                    <p class="text-slate-500 text-sm mb-4">Evolução histórica da população feminina residente no Estado do Rio de Janeiro.</p>
                    <div class="overflow-x-auto rounded-lg border border-slate-100">
                        <table class="custom-table" id="tabelaPopulacao">
                            <thead>
                                <tr>
                                    <th>Grupo Etário</th>
                                    <th>2016</th>
                                    <th>2017</th>
                                    <th>2018</th>
                                    <th>2019</th>
                                    <th>2022</th>
                                    <th>2023</th>
                                    <th>2024</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Preenchido via JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>

            <!-- Aba 2: Educação -->
            <div id="educacao" class="tab-panel">
                <!-- (Conteúdo mantido igual ao anterior, só oculto por padrão) -->
                <h2 class="h2-title card-animate">Educação: O Paradoxo da Qualificação</h2>
                <p class="text-slate-600 mb-6 card-animate">
                    As mulheres no Rio de Janeiro estudam mais, têm menos analfabetismo e acessam mais o ensino superior. 
                    Apesar disso, a disparidade salarial persiste.
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 100ms;">
                        <h3 class="kpi-title">Média Anos de Estudo (15+)</h3>
                        <div class="flex items-baseline gap-4 mt-2">
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-mulheres);">M:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-mulheres);" data-value="11.2" data-suffix=" anos">0.0</p></div>
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-homens);">H:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-homens);" data-value="11.1" data-suffix=" anos">0.0</p></div>
                        </div>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 200ms;">
                        <h3 class="kpi-title">Frequência Superior (18-24 anos)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-positive);" data-value="8.5" data-prefix="+" data-suffix=" p.p.">+0.0 p.p.</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;">
                        <h3 class="kpi-title">Mulheres com Superior Completo</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-mulheres);" data-value="1.75" data-suffix=" mi">0 mi</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 400ms;">
                        <h3 class="kpi-title">Mulheres Analfabetas (15+)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="154" data-suffix=" mil">0 mil</p>
                        <p class="kpi-subtitle">vs 134 mil homens (2024)</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div class="chart-card card-animate" style="animation-delay: 400ms;">
                        <h3 class="h3-title">Evolução: Média de Anos de Estudo (15+)</h3>
                        <div class="h-[300px] relative"><canvas id="anosEstudoChart"></canvas></div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 500ms;">
                        <h3 class="h3-title">Taxa Ajustada Frequência Superior (18-24 anos)</h3>
                        <div class="h-[300px] relative"><canvas id="freqSuperiorChart"></canvas></div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 600ms;">
                        <h3 class="h3-title">Evolução do Analfabetismo (15 anos ou mais)</h3>
                        <div class="h-[300px] relative"><canvas id="analfabetismoChart"></canvas></div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 700ms;">
                        <h3 class="h3-title">Evolução do Nível Superior Completo (Absoluto)</h3>
                        <div class="h-[300px] relative"><canvas id="superiorAbsolutoChart"></canvas></div>
                    </div>
                </div>
            </div>

            <!-- Aba Saúde (Nova, Placeholder) -->
            <div id="saude" class="tab-panel">
                <h2 class="h2-title card-animate">Saúde da Mulher</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 100ms;">
                        <h3 class="kpi-title">Dados em Integração</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-text-muted);" data-value="0">-</p>
                    </div>
                     <a href="https://cisshiny.saude.rj.gov.br/_d/violencia_select/" target="_blank" rel="noopener" class="kpi-card card-animate hover:border-[var(--color-accent)] group block" style="animation-delay: 200ms; cursor: pointer;">
                        <h3 class="kpi-title group-hover:text-[var(--color-accent)] transition-colors">Painel Saúde RJ</h3>
                        <p class="kpi-subtitle">Monitoramento de Violência (CIS-RJ)</p>
                    </a>
                    <a href="https://observatoriosaudepublica.com.br/" target="_blank" rel="noopener" class="kpi-card card-animate hover:border-[var(--color-accent)] group block" style="animation-delay: 300ms; cursor: pointer;">
                        <h3 class="kpi-title group-hover:text-[var(--color-accent)] transition-colors">Observatório Saúde</h3>
                        <p class="kpi-subtitle">Análises de Saúde Pública</p>
                    </a>
                </div>
                <div class="chart-card card-animate text-center py-12" style="animation-delay: 400ms;">
                    <div class="inline-flex p-4 rounded-full bg-slate-50 mb-4 text-slate-400">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
                    </div>
                    <h3 class="text-lg font-medium text-slate-700">Área de Indicadores de Saúde</h3>
                    <p class="text-slate-500 max-w-md mx-auto mt-2">Esta seção está preparada para receber dados de mortalidade materna e exames preventivos.</p>
                </div>
            </div>

            <!-- Aba 3: Emprego e Renda (Mantida) -->
            <div id="renda" class="tab-panel">
                <!-- Conteúdo igual ao anterior -->
                <h2 class="h2-title card-animate">Emprego e Renda</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 100ms;">
                        <h3 class="kpi-title">Diferença de Rendimento</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="-24.4" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">(2º tri 2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 200ms;">
                        <h3 class="kpi-title">Diferença na Ocupação</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="-19.9" data-suffix=" p.p.">0,0 p.p.</p>
                        <p class="kpi-subtitle">(2º tri 2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;">
                        <h3 class="kpi-title">Diferença na Informalidade</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="4.0" data-prefix="+" data-suffix=" p.p.">+0,0 p.p.</p>
                        <p class="kpi-subtitle">(2º tri 2025)</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div class="chart-card card-animate" style="animation-delay: 400ms;"><h3 class="h3-title">Evolução do Rendimento Médio</h3><div class="h-[300px] relative"><canvas id="rendimentoChart"></canvas></div></div>
                    <div class="chart-card card-animate" style="animation-delay: 500ms;"><h3 class="h3-title">Evolução da Taxa de Ocupação</h3><div class="h-[300px] relative"><canvas id="ocupacaoChart"></canvas></div></div>
                    <div class="chart-card lg:col-span-2 card-animate" style="animation-delay: 600ms;"><h3 class="h3-title">Evolução da Taxa de Informalidade</h3><div class="h-[300px] relative"><canvas id="informalidadeChart"></canvas></div></div>
                </div>
            </div>
            
            <!-- Aba 4: Cuidado (Mantida) -->
            <div id="jornada" class="tab-panel">
                <h2 class="h2-title card-animate">Cuidado (Afazeres Domésticos)</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 100ms;"><h3 class="kpi-title">Horas Semanais a Mais (2022)</h3><p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="7.6" data-prefix="+" data-suffix="h">+0,0h</p></div>
                    <div class="kpi-card card-animate" style="animation-delay: 200ms;"><h3 class="kpi-title">Taxa de Afazeres (25-49 anos)</h3><p class="kpi-value kpi-value-animated" style="color: var(--color-mulheres);" data-value="94.7" data-suffix="%">0,0%</p></div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;"><h3 class="kpi-title">Taxa de Afazeres (Sup. completo)</h3><p class="kpi-value kpi-value-animated" style="color: var(--color-mulheres);" data-value="92.2" data-suffix="%">0,0%</p></div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <div class="chart-card lg:col-span-3 card-animate" style="animation-delay: 400ms;"><h3 class="h3-title">Horas Semanais em Afazeres</h3><div class="h-[300px] relative"><canvas id="afazeresChart"></canvas></div></div>
                    <div class="chart-card card-animate" style="animation-delay: 500ms;"><h3 class="h3-title">Taxa de Afazeres por Instrução</h3><div class="h-[300px] relative"><canvas id="instrucaoChart"></canvas></div></div>
                    <div class="chart-card card-animate" style="animation-delay: 600ms;"><h3 class="h3-title">Taxa de Afazeres por Idade</h3><div class="h-[300px] relative"><canvas id="idadeChart"></canvas></div></div>
                </div>
            </div>
            
            <!-- Aba 5: Representação Feminina (Mantida) -->
            <div id="poder" class="tab-panel">
                <h2 class="h2-title card-animate">Representação Política (Cargos Eletivos)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 100ms;"><h3 class="kpi-title">Mulheres no Executivo RJ</h3><p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="20.6" data-suffix="%">0,0%</p></div>
                    <div class="kpi-card card-animate" style="animation-delay: 200ms;"><h3 class="kpi-title">Mulheres na ALERJ</h3><p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="22.9" data-suffix="%">0,0%</p></div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;"><h3 class="kpi-title">Mulheres no TJRJ</h3><p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="41.2" data-suffix="%">0,0%</p></div>
                    <div class="kpi-card card-animate" style="animation-delay: 400ms;"><h3 class="kpi-title">Mulheres em Prefeituras</h3><p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="15.2" data-suffix="%">0,0%</p></div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-12">
                    <div class="chart-card card-animate" style="animation-delay: 500ms;"><h3 class="h3-title text-center">Evolução Executivo RJ</h3><div class="h-[350px] relative"><canvas id="executivoChart"></canvas></div></div>
                    <div class="chart-card card-animate" style="animation-delay: 600ms;"><h3 class="h3-title text-center">Evolução ALERJ</h3><div class="h-[350px] relative"><canvas id="alerjChart"></canvas></div></div>
                    <div class="chart-card card-animate" style="animation-delay: 700ms;"><h3 class="h3-title text-center">Evolução Prefeituras</h3><div class="h-[350px] relative"><canvas id="prefeiturasChart"></canvas></div></div>
                    <div class="chart-card card-animate" style="animation-delay: 800ms;"><h3 class="h3-title text-center">Composição TJRJ (2025)</h3><div class="h-[350px] relative"><canvas id="tjrjChart"></canvas></div></div>
                </div>
            </div>
            
            <!-- Aba 6: Liderança e Gestão (Mantida) -->
            <div id="lideranca" class="tab-panel">
                <h2 class="h2-title card-animate">Liderança e Gestão Pública (Série Histórica)</h2>
                <div class="grid grid-cols-1 gap-6 mb-8">
                     <div class="chart-card card-animate" style="animation-delay: 100ms;">
                        <h3 class="h3-title">Evolução do Gap Salarial na Gestão</h3>
                        <div class="h-[250px] relative"><canvas id="gapChefiaChart"></canvas></div>
                        <p class="text-xs text-slate-400 mt-2">Diferença em Reais (R$) a favor dos homens em cargos gerenciais no RJ.</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="chart-card card-animate" style="animation-delay: 200ms;"><h3 class="h3-title">Evolução da Representatividade Feminina (%)</h3><div class="h-[300px] relative"><canvas id="historicoPoliticoChart"></canvas></div></div>
                    <div class="chart-card card-animate" style="animation-delay: 300ms;"><h3 class="h3-title">Proporção em Cargos Gerenciais - RJ (%)</h3><div class="h-[300px] relative"><canvas id="historicoGerencialChart"></canvas></div></div>
                    <div class="chart-card lg:col-span-2 card-animate" style="animation-delay: 400ms;"><h3 class="h3-title">Rendimento Médio em Cargos de Gestão - RJ (R$)</h3><div class="h-[300px] relative"><canvas id="historicoRendaGestaoChart"></canvas></div></div>
                </div>
            </div>

            <!-- Aba 7: Mapa Político (Mantido) -->
            <div id="mapa" class="tab-panel">
                <h2 class="h2-title card-animate">Mapa Político: Prefeituras RJ (2025)</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 100ms;"><h3 class="kpi-title">Total de Prefeituras</h3><p class="kpi-value kpi-value-animated" style="color: var(--color-text-primary);" data-value="92">0</p></div>
                    <div class="kpi-card card-animate" style="animation-delay: 200ms;"><h3 class="kpi-title">Prefeitas Mulheres</h3><p class="kpi-value kpi-value-animated" style="color: var(--color-mulheres);" data-value="14">0</p></div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;"><h3 class="kpi-title">% de Mulheres no Executivo</h3><p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="15.2" data-suffix="%">0,0%</p></div>
                </div>
                <div class="chart-card card-animate" style="animation-delay: 400ms;">
                    <h3 class="h3-title">Distribuição de Gênero nas Prefeituras do RJ</h3>
                    <div id="map_chart_div" class="w-full min-h-[500px] md:min-h-[650px] relative z-0"><div class="flex items-center justify-center h-full text-slate-500">Carregando mapa...</div></div>
                </div>
            </div>
            
            <!-- Aba 8: Violências de Gênero (Mantida) -->
            <div id="fontes" class="tab-panel">
                 <div class="chart-card mb-8 card-animate"> 
                    <h2 class="text-2xl font-semibold text-slate-800 mb-3">Acesse Outros Portais de Monitoramento</h2>
                    <p class="text-slate-600 leading-relaxed">Links para Violências de Gênero e relatórios oficiais.</p>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center card-animate" style="animation-delay: 100ms;">
                    <!-- Cards dos Violências de Gênero (HTML mantido do passo anterior) -->
                    <a href="https://www.ispconecta.rj.gov.br/ispmulher/" target="_blank" rel="noopener" class="group relative block w-full max-w-[320px] rounded-xl border border-gray-200 bg-white shadow-sm hover:shadow-md hover:border-[var(--color-accent)] transition-all duration-300"><div class="p-5 flex flex-col h-full"><div class="flex items-start gap-3"><div class="shrink-0 rounded-lg p-3" style="background-color: rgba(139, 92, 246, 0.1); color: var(--color-accent);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" x2="18" y1="20" y2="10"></line><line x1="12" x2="12" y1="20" y2="4"></line><line x1="6" x2="6" y1="20" y2="14"></line></svg></div><div class="min-w-0"><h3 class="font-semibold text-[var(--color-text-primary)] group-hover:text-[var(--color-accent)] transition-colors">Painel Mulher (ISP)</h3><p class="text-sm mt-1 text-gray-600">Violência contra a mulher no RJ.</p></div></div><span class="mt-auto inline-flex items-center gap-1 text-sm font-medium text-[var(--color-accent)] pt-4 group-hover:translate-x-1 transition-transform">Acessar <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></span></div></a>
                    <a href="https://ispconecta.rj.gov.br/dossie_mulher/" target="_blank" rel="noopener" class="group relative block w-full max-w-[320px] rounded-xl border border-gray-200 bg-white shadow-sm hover:shadow-md hover:border-[var(--color-accent)] transition-all duration-300"><div class="p-5 flex flex-col h-full"><div class="flex items-start gap-3"><div class="shrink-0 rounded-lg p-3" style="background-color: rgba(139, 92, 246, 0.1); color: var(--color-accent);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"></path><path d="M14 2v4a2 2 0 0 0 2 2h4"></path><path d="M8 18v-2"></path><path d="M12 18v-4"></path><path d="M16 18v-6"></path></svg></div><div class="min-w-0"><h3 class="font-semibold text-[var(--color-text-primary)] group-hover:text-[var(--color-accent)] transition-colors">Dossiê Mulher</h3><p class="text-sm mt-1 text-gray-600">Estudos e relatórios.</p></div></div><span class="mt-auto inline-flex items-center gap-1 text-sm font-medium text-[var(--color-accent)] pt-4 group-hover:translate-x-1 transition-transform">Acessar <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></span></div></a>
                    <a href="https://cisshiny.saude.rj.gov.br/_d/violencia_select/" target="_blank" rel="noopener" class="group relative block w-full max-w-[320px] rounded-xl border border-gray-200 bg-white shadow-sm hover:shadow-md hover:border-[var(--color-accent)] transition-all duration-300"><div class="p-5 flex flex-col h-full"><div class="flex items-start gap-3"><div class="shrink-0 rounded-lg p-3" style="background-color: rgba(139, 92, 246, 0.1); color: var(--color-accent);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path></svg></div><div class="min-w-0"><h3 class="font-semibold text-[var(--color-text-primary)] group-hover:text-[var(--color-accent)] transition-colors">Saúde RJ</h3><p class="text-sm mt-1 text-gray-600">Materiais de saúde pública.</p></div></div><span class="mt-auto inline-flex items-center gap-1 text-sm font-medium text-[var(--color-accent)] pt-4 group-hover:translate-x-1 transition-transform">Acessar <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></span></div></a>
                    <a href="https://app.powerbi.com/view?r=eyJrIjoiZWUwOWJhYmYtZjAzNi00ZmRkLWJlZmMtODQ3NjdlZmZjNTZlIiwidCI6ImViMDkwNDIwLTQ0NGMtNDNmNy05MWYyLTRiOGRhNmJmZThlMSJ9" target="_blank" rel="noopener" class="group relative block w-full max-w-[320px] rounded-xl border border-gray-200 bg-white shadow-sm hover:shadow-md hover:border-[var(--color-accent)] transition-all duration-300"><div class="p-5 flex flex-col h-full"><div class="flex items-start gap-3"><div class="shrink-0 rounded-lg p-3" style="background-color: rgba(139, 92, 246, 0.1); color: var(--color-accent);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"></path><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"></path><path d="M7 21h10"></path><path d="M12 3v18"></path><path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"></path></svg></div><div class="min-w-0"><h3 class="font-semibold text-[var(--color-text-primary)] group-hover:text-[var(--color-accent)] transition-colors">Ministério da Justiça</h3><p class="text-sm mt-1 text-gray-600">Violência contra a mulher.</p></div></div><span class="mt-auto inline-flex items-center gap-1 text-sm font-medium text-[var(--color-accent)] pt-4 group-hover:translate-x-1 transition-transform">Acessar <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></span></div></a>
                    <a href="https://app.powerbi.com/view?r=eyJrIjoiMjI3OTY1ZDMtMTYyMS00ZDIzLThjMGYtMGMyZDFiYjk0MWIyIiwidCI6ImNlNGUxMTY0LTk4NmYtNDEzMi04NWQxLTFlM2MxN2NmN2Q2ZSIsImMiOjR9" target="_blank" rel="noopener" class="group relative block w-full max-w-[320px] rounded-xl border border-gray-200 bg-white shadow-sm hover:shadow-md hover:border-[var(--color-accent)] transition-all duration-300"><div class="p-5 flex flex-col h-full"><div class="flex items-start gap-3"><div class="shrink-0 rounded-lg p-3" style="background-color: rgba(139, 92, 246, 0.1); color: var(--color-accent);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 18v-7"></path><path d="M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z"></path><path d="M14 18v-7"></path><path d="M18 18v-7"></path><path d="M3 22h18"></path><path d="M6 18v-7"></path></svg></div><div class="min-w-0"><h3 class="font-semibold text-[var(--color-text-primary)] group-hover:text-[var(--color-accent)] transition-colors">Tribunal de Justiça (RJ)</h3><p class="text-sm mt-1 text-gray-600">Dados judiciais.</p></div></div><span class="mt-auto inline-flex items-center gap-1 text-sm font-medium text-[var(--color-accent)] pt-4 group-hover:translate-x-1 transition-transform">Acessar <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></span></div></a>
                    <a href="https://www.cnj.jus.br/programas-e-acoes/violencia-contra-a-mulher/painel-da-violencia-domestica/" target="_blank" rel="noopener" class="group relative block w-full max-w-[320px] rounded-xl border border-gray-200 bg-white shadow-sm hover:shadow-md hover:border-[var(--color-accent)] transition-all duration-300"><div class="p-5 flex flex-col h-full"><div class="flex items-start gap-3"><div class="shrink-0 rounded-lg p-3" style="background-color: rgba(139, 92, 246, 0.1); color: var(--color-accent);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"></path></svg></div><div class="min-w-0"><h3 class="font-semibold text-[var(--color-text-primary)] group-hover:text-[var(--color-accent)] transition-colors">CNJ - Violência</h3><p class="text-sm mt-1 text-gray-600">Painel nacional.</p></div></div><span class="mt-auto inline-flex items-center gap-1 text-sm font-medium text-[var(--color-accent)] pt-4 group-hover:translate-x-1 transition-transform">Acessar <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></span></div></a>
                    <a href="https://observatoriosaudepublica.com.br/" target="_blank" rel="noopener" class="group relative block w-full max-w-[320px] rounded-xl border border-gray-200 bg-white shadow-sm hover:shadow-md hover:border-[var(--color-accent)] transition-all duration-300"><div class="p-5 flex flex-col h-full"><div class="flex items-start gap-3"><div class="shrink-0 rounded-lg p-3" style="background-color: rgba(139, 92, 246, 0.1); color: var(--color-accent);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg></div><div class="min-w-0"><h3 class="font-semibold text-[var(--color-text-primary)] group-hover:text-[var(--color-accent)] transition-colors">Observatório Saúde</h3><p class="text-sm mt-1 text-gray-600">Análises de Saúde Pública.</p></div></div><span class="mt-auto inline-flex items-center gap-1 text-sm font-medium text-[var(--color-accent)] pt-4 group-hover:translate-x-1 transition-transform">Acessar <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></span></div></a>
                </div>
            </div>

        </div>

        <!-- Rodapé Dinâmico -->
        <footer id="dynamic-footer" class="bg-white border-t border-slate-200 p-6 text-center text-xs text-slate-500">
            Fonte: Instituto Brasileiro de Geografia e Estatistica - IBGE
        </footer>
    </main>

    <script>
        const cssVars = getComputedStyle(document.documentElement);
        const corMulheres = cssVars.getPropertyValue('--color-mulheres') || '#fb7185';
        const corHomens = cssVars.getPropertyValue('--color-homens') || '#64748b';
        const corBordaMulheres = cssVars.getPropertyValue('--color-mulheres-border') || '#f43f5e';
        const corBordaHomens = cssVars.getPropertyValue('--color-homens-border') || '#475569';
        const corGrid = cssVars.getPropertyValue('--color-border-divider') || '#ddd6fe';
        const corTexto = cssVars.getPropertyValue('--color-text-secondary') || '#475569';
        const corTooltipBg = cssVars.getPropertyValue('--color-bg-card') || '#ffffff';
        const corTooltipTitle = cssVars.getPropertyValue('--color-text-primary') || '#1e293b';
        const corTooltipBorder = cssVars.getPropertyValue('--color-border-card') || '#ede9fe';
        const corBgCard = cssVars.getPropertyValue('--color-bg-card') || '#ffffff';
        const corAccent = cssVars.getPropertyValue('--color-accent') || '#8b5cf6'; 
        const corKpiNegative = cssVars.getPropertyValue('--color-kpi-negative') || '#ef4444';

        const globalChartOptions = (plugins = {}, scales = {}) => ({
            responsive: true, maintainAspectRatio: false,
            animation: { duration: 1000, easing: 'easeInOutCubic' },
            plugins: {
                legend: { position: 'top', labels: { color: corTexto, font: { size: 12 }, padding: 20 } },
                tooltip: { backgroundColor: corTooltipBg, titleColor: corTooltipTitle, bodyColor: corTexto, borderColor: corTooltipBorder, borderWidth: 1, padding: 10, cornerRadius: 6, displayColors: true, boxPadding: 4 },
                ...plugins
            },
            scales: {
                x: { ticks: { color: corTexto, font: { size: 10 } }, grid: { color: corGrid, drawBorder: false }, ...scales.x },
                y: { ticks: { color: corTexto, font: { size: 10 } }, grid: { color: corGrid, drawBorder: false }, ...scales.y }
            }
        });

        window.chartInstances = {};
        const allPanels = document.querySelectorAll('.tab-panel');
        const allButtons = document.querySelectorAll('.sidebar-button');

        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        const mobileTitle = document.getElementById('mobile-title');

        function toggleSidebar(forceOpen = null) {
            if (!sidebar || !overlay) return;
            const isOpen = sidebar.classList.contains('translate-x-0');
            if (forceOpen === true || (forceOpen === null && !isOpen)) {
                sidebar.classList.remove('-translate-x-full'); sidebar.classList.add('translate-x-0'); overlay.classList.remove('hidden');
            } else {
                sidebar.classList.add('-translate-x-full'); sidebar.classList.remove('translate-x-0'); overlay.classList.add('hidden');
            }
        }

        function showTab(tabId, element) {
            const targetPanel = document.getElementById(tabId);
            if (!targetPanel) return;

            allButtons.forEach(button => button.classList.remove('active-tab'));
            element.classList.add('active-tab');

            if (mobileTitle) {
                const span = element.querySelector('span');
                if (span) mobileTitle.textContent = span.textContent;
            }

            allPanels.forEach(panel => {
                if (panel.id === tabId) {
                    panel.classList.remove('hidden'); panel.classList.add('active-panel'); void panel.offsetWidth; panel.classList.remove('opacity-0'); panel.classList.add('opacity-100');
                } else {
                    panel.classList.remove('active-panel', 'opacity-100'); panel.classList.add('opacity-0');
                    setTimeout(() => { if (!panel.classList.contains('active-panel')) panel.classList.add('hidden'); }, 400);
                }
            });
            
            // Rodapé Dinâmico
            const footer = document.getElementById('dynamic-footer');
            if (footer) {
                if (tabId === 'poder') {
                    footer.innerHTML = "Fonte: Assembleia Legislativa do Estado do Rio de Janeiro, Tribunal de Justiça do Rio de Janeiro, Governo do Estado do Rio de Janeiro e Instituto Brasileiro de Geografia e Estatistica - IBGE";
                } else {
                    footer.innerHTML = "Fonte: Instituto Brasileiro de Geografia e Estatistica - IBGE";
                }
            }

            if (tabId === 'renda') createRendaCharts();
            else if (tabId === 'jornada') createJornadaCharts();
            else if (tabId === 'poder') createPoderChart();
            else if (tabId === 'lideranca') createLiderancaCharts();
            else if (tabId === 'educacao') createEducacaoCharts();
            else if (tabId === 'mapa') createMapaChart();
            else if (tabId === 'saude') createSaudeCharts(); // Placeholder
            else if (tabId === 'inicio') createInicioCharts();
            
            setTimeout(() => triggerAnimations(targetPanel), 100);
            if (window.innerWidth < 1024) toggleSidebar(false);
        }
        
        function animateCountUp(el) {
            const targetValue = parseFloat(el.dataset.value);
            if (isNaN(targetValue)) return;
            const duration = 1500; const prefix = el.dataset.prefix || ''; const suffix = el.dataset.suffix || '';
            let start = null; const startValue = 0;
            const step = (timestamp) => {
                if (!start) start = timestamp;
                const progress = Math.min((timestamp - start) / duration, 1);
                let currentValue = startValue + (targetValue - startValue) * progress * (2 - progress);
                let textValue;
                if (Math.abs(targetValue) > 0 && Math.abs(targetValue) < 1) textValue = currentValue.toFixed(1);
                else if (targetValue % 1 !== 0) textValue = currentValue.toFixed(1);
                else textValue = currentValue.toFixed(0);
                if (textValue === '-0,0' || textValue === '-0') textValue = '0';
                el.textContent = `${prefix}${String(textValue).replace('.', ',')}${suffix}`;
                if (progress < 1) window.requestAnimationFrame(step);
                else el.textContent = `${prefix}${String(targetValue).replace('.', ',')}${suffix}`;
            };
            window.requestAnimationFrame(step);
        }

        function triggerAnimations(panel) {
            if (!panel) return;
            panel.querySelectorAll('.kpi-value-animated').forEach(animateCountUp);
            const cards = panel.querySelectorAll('.card-animate');
            cards.forEach((card, index) => {
                card.style.animation = 'none'; void card.offsetWidth;
                if (card.classList.contains('impact-glow')) card.style.animationDelay = `${index * 100}ms, ${index * 100 + 500}ms`;
                else card.style.animationDelay = `${index * 100}ms`;
                card.style.animation = '';
            });
        }

        // --- Gráficos da Página Inicial ---
        function createInicioCharts() {
            if (window.chartInstances.populacaoFemininaChart) window.chartInstances.populacaoFemininaChart.destroy();

            const ctx = document.getElementById('populacaoFemininaChart')?.getContext('2d');
            if (ctx) {
                window.chartInstances.populacaoFemininaChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['2016', '2017', '2018', '2019', '2022', '2023', '2024'],
                        datasets: [{
                            label: 'População Feminina (Milhões - Estimado)',
                            data: [8.6, 8.65, 8.7, 8.75, 8.8, 8.85, 8.9], 
                            borderColor: corBordaMulheres,
                            backgroundColor: 'rgba(251, 113, 133, 0.1)',
                            fill: true,
                            tension: 0.4,
                            borderWidth: 3,
                            pointRadius: 4
                        }]
                    },
                    options: globalChartOptions({
                        tooltip: { callbacks: { label: (c) => `${c.dataset.label}: ${c.raw} milhões` } }
                    })
                });
            }

            const tabelaBody = document.querySelector('#tabelaPopulacao tbody');
            if (tabelaBody) {
                tabelaBody.innerHTML = ''; 
                const popData = [
                    { grupo: "0 a 3 anos", dados: [394, 386, 404, 397, 333, 368, 393] },
                    { grupo: "4 a 5 anos", dados: [219, 194, 194, 197, 206, 201, 203] },
                    { grupo: "6 a 9 anos", dados: [397, 387, 384, 397, 405, 384, 415] },
                    { grupo: "10 a 14 anos", dados: [539, 500, 496, 507, 485, 497, 516] },
                    { grupo: "15 a 17 anos", dados: [346, 349, 343, 307, 317, 321, 321] },
                    { grupo: "18 a 24 anos", dados: [900, 946, 896, 886, 921, 852, 784] },
                    { grupo: "25 a 29 anos", dados: [677, 637, 681, 653, 646, 665, 661] }
                ];

                popData.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${row.grupo}</td>
                        ${row.dados.map(val => `<td>${val}</td>`).join('')}
                    `;
                    tabelaBody.appendChild(tr);
                });
            }
        }

        // --- Placeholder Charts for Health Tab ---
        function createSaudeCharts() {
             // Currently no charts to create, but function needed for tab switch logic
        }

        // --- Gráficos da Aba Educação ---
        function createEducacaoCharts() {
            if (window.chartInstances.anosEstudoChart) window.chartInstances.anosEstudoChart.destroy();
            if (window.chartInstances.freqSuperiorChart) window.chartInstances.freqSuperiorChart.destroy();
            if (window.chartInstances.superiorAbsolutoChart) window.chartInstances.superiorAbsolutoChart.destroy();
            if (window.chartInstances.analfabetismoChart) window.chartInstances.analfabetismoChart.destroy();

            const ctx1 = document.getElementById('anosEstudoChart').getContext('2d');
            window.chartInstances.anosEstudoChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['2016', '2017', '2018', '2019', '2022', '2023', '2024'],
                    datasets: [
                        { label: 'Mulheres', data: [10.1, 10.3, 10.6, 10.8, 11.1, 11.2, 11.2], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.2, borderWidth: 3, pointRadius: 3 },
                        { label: 'Homens', data: [10.1, 10.3, 10.6, 10.7, 11.0, 11.2, 11.1], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.2, borderWidth: 3, pointRadius: 3 }
                    ]
                },
                options: globalChartOptions({ tooltip: { callbacks: { label: (c) => `${c.dataset.label}: ${c.raw} anos` } } }, { y: { min: 9, title: { display: true, text: 'Média de Anos' } } })
            });

            const ctx2 = document.getElementById('freqSuperiorChart').getContext('2d');
            window.chartInstances.freqSuperiorChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['2016', '2017', '2018', '2019', '2022', '2023', '2024'],
                    datasets: [
                        { label: 'Mulheres', data: [26.3, 20.5, 25.9, 31.8, 27.4, 28.8, 31.5], backgroundColor: corMulheres, borderRadius: 4 },
                        { label: 'Homens', data: [21.2, 20.5, 21.9, 23.0, 21.0, 22.7, 23.0], backgroundColor: corHomens, borderRadius: 4 }
                    ]
                },
                options: globalChartOptions()
            });

            const ctx4 = document.getElementById('analfabetismoChart').getContext('2d');
            window.chartInstances.analfabetismoChart = new Chart(ctx4, {
                type: 'line',
                data: {
                    labels: ['2016', '2017', '2018', '2019', '2022', '2023', '2024'],
                    datasets: [
                        { label: 'Mulheres (Mil)', data: [194, 183, 177, 147, 170, 158, 154], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.3, borderWidth: 3 },
                        { label: 'Homens (Mil)', data: [148, 153, 134, 126, 143, 132, 134], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.3, borderWidth: 3 }
                    ]
                },
                options: globalChartOptions()
            });
            
            const ctx3 = document.getElementById('superiorAbsolutoChart').getContext('2d');
            window.chartInstances.superiorAbsolutoChart = new Chart(ctx3, {
                type: 'line',
                data: {
                    labels: ['2016', '2017', '2018', '2019', '2022', '2023', '2024'],
                    datasets: [
                        { label: 'Mulheres (Mil)', data: [1119, 1166, 1331, 1468, 1748, 1759, 1757], borderColor: corBordaMulheres, backgroundColor: 'rgba(251, 113, 133, 0.1)', fill: true, tension: 0.3, borderWidth: 3 },
                        { label: 'Homens (Mil)', data: [802, 843, 902, 1014, 1074, 1135, 1195], borderColor: corBordaHomens, backgroundColor: 'transparent', tension: 0.3, borderWidth: 3, borderDash: [5, 5] }
                    ]
                },
                options: globalChartOptions()
            });
        }

        // --- Gráficos Renda, Jornada e Poder (Existentes) ---
        function createRendaCharts() {
            if (window.chartInstances.rendimentoChart) window.chartInstances.rendimentoChart.destroy();
            if (window.chartInstances.ocupacaoChart) window.chartInstances.ocupacaoChart.destroy();
            if (window.chartInstances.informalidadeChart) window.chartInstances.informalidadeChart.destroy();

            const ctx1 = document.getElementById('rendimentoChart').getContext('2d');
            window.chartInstances.rendimentoChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['1º tri 2023', '2º tri 2023', '3º tri 2023', '4º tri 2023', '1º tri 2024', '2º tri 2024', '3º tri 2024', '4º tri 2024', '1º tri 2025', '2º tri 2025'],
                    datasets: [
                        { label: 'Mulheres', data: [3306, 3261, 3319, 3228, 3229, 3228, 3175, 3236, 3439, 3456], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.2, fill: false, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 },
                        { label: 'Homens', data: [4156, 4142, 4287, 4171, 4318, 4331, 4267, 4180, 4477, 4572], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.2, fill: false, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 }
                    ]
                },
                options: globalChartOptions()
            });

            const ctx3 = document.getElementById('ocupacaoChart').getContext('2d');
            window.chartInstances.ocupacaoChart = new Chart(ctx3, {
                type: 'line',
                data: {
                    labels: ['1º tri 2023', '2º tri 2023', '3º tri 2023', '4º tri 2023', '1º tri 2024', '2º tri 2024', '3º tri 2024', '4º tri 2024', '1º tri 2025', '2º tri 2025'],
                    datasets: [
                        { label: 'Mulheres', data: [51.1, 51.5, 51.9, 52.8, 53.1, 52.6, 52.1, 52.4, 52.5, 52.5], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.2, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 },
                        { label: 'Homens', data: [70.5, 70.8, 71.1, 71.6, 71.6, 71.8, 71.6, 71.3, 71.7, 72.4], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.2, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 }
                    ]
                },
                options: globalChartOptions()
            });

            const ctx4 = document.getElementById('informalidadeChart').getContext('2d');
            window.chartInstances.informalidadeChart = new Chart(ctx4, {
                type: 'line',
                data: {
                    labels: ['1º tri 2023', '2º tri 2023', '3º tri 2023', '4º tri 2023', '1º tri 2024', '2º tri 2024', '3º tri 2024', '4º tri 2024', '1º tri 2025', '2º tri 2025'],
                    datasets: [
                        { label: 'Mulheres', data: [37.0, 38.0, 38.4, 39.1, 39.4, 39.5, 39.5, 39.7, 38.7, 39.9], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.2, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 },
                        { label: 'Homens', data: [36.1, 36.6, 37.1, 37.0, 37.4, 36.8, 36.6, 37.1, 36.0, 35.9], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.2, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 }
                    ]
                },
                options: globalChartOptions()
            });
        }

        function createJornadaCharts() {
            if (window.chartInstances.afazeresChart) window.chartInstances.afazeresChart.destroy();
            if (window.chartInstances.instrucaoChart) window.chartInstances.instrucaoChart.destroy();
            if (window.chartInstances.idadeChart) window.chartInstances.idadeChart.destroy();

            const ctx2 = document.getElementById('afazeresChart').getContext('2d');
            window.chartInstances.afazeresChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['2018', '2019', '2022'],
                    datasets: [
                        { label: 'Mulheres', data: [21.4, 20.6, 20.1], backgroundColor: corMulheres, borderRadius: 4 },
                        { label: 'Homens', data: [12.5, 11.9, 12.5], backgroundColor: corHomens, borderRadius: 4 }
                    ]
                },
                options: globalChartOptions()
            });

            const ctx5 = document.getElementById('instrucaoChart').getContext('2d');
            window.chartInstances.instrucaoChart = new Chart(ctx5, {
                type: 'bar',
                data: {
                    labels: ['Sem instrução', 'Fund. completo', 'Médio completo', 'Superior completo'],
                    datasets: [
                        { label: 'Mulheres', data: [87.4, 90.0, 92.4, 92.2], backgroundColor: corMulheres, borderRadius: 4 },
                        { label: 'Homens', data: [78.9, 81.5, 86.6, 87.2], backgroundColor: corHomens, borderRadius: 4 }
                    ]
                },
                options: globalChartOptions({}, { x: { ticks: { font: { size: 8 } } } })
            });

            const ctx6 = document.getElementById('idadeChart').getContext('2d');
            window.chartInstances.idadeChart = new Chart(ctx6, {
                type: 'bar',
                data: {
                    labels: ['14 a 24 anos', '25 a 49 anos', '50 anos ou mais'],
                    datasets: [
                        { label: 'Mulheres', data: [84.9, 94.7, 89.3], backgroundColor: corMulheres, borderRadius: 4 },
                        { label: 'Homens', data: [72.9, 87.7, 84.9], backgroundColor: corHomens, borderRadius: 4 }
                    ]
                },
                options: globalChartOptions()
            });
        }
        
        function createPoderChart() {
            if (window.chartInstances.executivoChart) window.chartInstances.executivoChart.destroy();
            if (window.chartInstances.alerjChart) window.chartInstances.alerjChart.destroy();
            if (window.chartInstances.prefeiturasChart) window.chartInstances.prefeiturasChart.destroy();
            if (window.chartInstances.tjrjChart) window.chartInstances.tjrjChart.destroy();

            const groupedBarOptions = (title) => globalChartOptions({ title: { display: false, text: title, color: corTexto }, tooltip: { callbacks: { label: function(context) { return `${context.dataset.label}: ${context.raw.toFixed(1)}%`; } } } }, { x: { stacked: false }, y: { stacked: false, ticks: { callback: (value) => value + '%' } } });
            const doughnutOptions = (title) => ({ responsive: true, maintainAspectRatio: false, cutout: '70%', animation: { animateRotate: true, animateScale: true, duration: 1200 }, plugins: { legend: { position: 'bottom', labels: { color: corTexto, padding: 15 } }, title: { display: false, text: title, color: corTexto }, tooltip: { callbacks: { label: function(context) { let label = context.label || ''; if (label) { label += ': '; } if (context.parsed !== null) { label += context.parsed.toFixed(1) + '%'; } return label; } } } }, scales: { x: { display: false }, y: { display: false } } });

            const ctx_exec = document.getElementById('executivoChart').getContext('2d');
            window.chartInstances.executivoChart = new Chart(ctx_exec, { type: 'bar', data: { labels: ['2021', '2025'], datasets: [{ label: 'Mulheres', data: [7.1, 20.6], backgroundColor: corMulheres, borderRadius: 4 }, { label: 'Homens', data: [92.9, 79.4], backgroundColor: corHomens, borderRadius: 4 }] }, options: groupedBarOptions('Evolução Executivo RJ') });

            const ctx_alerj = document.getElementById('alerjChart').getContext('2d');
            window.chartInstances.alerjChart = new Chart(ctx_alerj, { type: 'bar', data: { labels: ['2021', '2025'], datasets: [{ label: 'Mulheres', data: [21.4, 22.9], backgroundColor: corMulheres, borderRadius: 4 }, { label: 'Homens', data: [78.6, 77.1], backgroundColor: corHomens, borderRadius: 4 }] }, options: groupedBarOptions('Evolução ALERJ') });

            const ctx_pref = document.getElementById('prefeiturasChart').getContext('2d');
            window.chartInstances.prefeiturasChart = new Chart(ctx_pref, { type: 'bar', data: { labels: ['2021', '2025'], datasets: [{ label: 'Mulheres', data: [8.7, 15.2], backgroundColor: corMulheres, borderRadius: 4 }, { label: 'Homens', data: [91.3, 84.8], backgroundColor: corHomens, borderRadius: 4 }] }, options: groupedBarOptions('Evolução Prefeituras') });

            const ctx_tjrj = document.getElementById('tjrjChart').getContext('2d');
            window.chartInstances.tjrjChart = new Chart(ctx_tjrj, { type: 'doughnut', data: { labels: ['Mulheres', 'Homens'], datasets: [{ data: [41.2, 58.8], backgroundColor: [corMulheres, corHomens], borderColor: [corBgCard, corBgCard], borderWidth: 4 }] }, options: doughnutOptions('Composição TJRJ (2025)') });
        }

        // --- Gráficos da Aba Liderança ---
        function createLiderancaCharts() {
            if (window.chartInstances.gapChefiaChart) window.chartInstances.gapChefiaChart.destroy();
            if (window.chartInstances.historicoPoliticoChart) window.chartInstances.historicoPoliticoChart.destroy();
            if (window.chartInstances.historicoGerencialChart) window.chartInstances.historicoGerencialChart.destroy();
            if (window.chartInstances.historicoRendaGestaoChart) window.chartInstances.historicoRendaGestaoChart.destroy();

            // NOVO: Gráfico de Evolução do Gap Salarial
            const ctx_gap = document.getElementById('gapChefiaChart').getContext('2d');
            window.chartInstances.gapChefiaChart = new Chart(ctx_gap, {
                type: 'line',
                data: {
                    labels: ['2017', '2018', '2019', '2020', '2021', '2022'],
                    datasets: [
                        { 
                            label: 'Gap Salarial (R$ a favor dos homens)', 
                            data: [2344, 3857, 2583, 2877, 3281, 1714], 
                            borderColor: corKpiNegative, 
                            backgroundColor: corKpiNegative, 
                            tension: 0.3, 
                            borderWidth: 3,
                            pointRadius: 4
                        }
                    ]
                },
                options: globalChartOptions({
                     tooltip: { callbacks: { label: (c) => `${c.dataset.label}: R$ ${c.raw}` } }
                }, { y: { title: { display: true, text: 'Diferença em Reais (R$)' } } })
            });

            // 1. Histórico Político (Ministérios vs Câmara)
            const ctx_hist_pol = document.getElementById('historicoPoliticoChart').getContext('2d');
            window.chartInstances.historicoPoliticoChart = new Chart(ctx_hist_pol, {
                type: 'line',
                data: {
                    labels: ['2017', '2020', '2023'],
                    datasets: [
                        { label: 'Ministérios (Brasil)', data: [4.5, 11.8, 25.0], borderColor: corAccent, backgroundColor: corAccent, tension: 0.3, borderWidth: 3 },
                        { label: 'Câmara Deputados (RJ)', data: [13.0, 21.7, 19.1], borderColor: corMulheres, backgroundColor: corMulheres, tension: 0.3, borderWidth: 3, borderDash: [5, 5] }
                    ]
                },
                options: globalChartOptions({
                     tooltip: { callbacks: { label: (c) => `${c.dataset.label}: ${c.raw}%` } }
                }, { y: { min: 0, ticks: { callback: (v) => v + '%' } } })
            });

            // 2. Histórico Gerencial (RJ)
            const ctx_hist_ger = document.getElementById('historicoGerencialChart').getContext('2d');
            window.chartInstances.historicoGerencialChart = new Chart(ctx_hist_ger, {
                type: 'bar',
                data: {
                    labels: ['2017', '2018', '2019', '2020', '2021', '2022'],
                    datasets: [
                        { label: 'Mulheres', data: [39.9, 43.4, 42.0, 37.8, 34.6, 37.8], backgroundColor: corMulheres, borderRadius: 4 },
                        { label: 'Homens', data: [60.1, 56.6, 58.0, 62.2, 65.4, 62.2], backgroundColor: corHomens, borderRadius: 4 }
                    ]
                },
                options: globalChartOptions({}, { x: { stacked: true }, y: { stacked: true, max: 100 } })
            });

            // 3. Histórico Renda Gestão (RJ)
            const ctx_hist_renda = document.getElementById('historicoRendaGestaoChart').getContext('2d');
            window.chartInstances.historicoRendaGestaoChart = new Chart(ctx_hist_renda, {
                type: 'line',
                data: {
                    labels: ['2017', '2018', '2019', '2020', '2021', '2022'],
                    datasets: [
                        { label: 'Homens (R$)', data: [7829, 9471, 9590, 12746, 9978, 11940], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.2, borderWidth: 3 },
                        { label: 'Mulheres (R$)', data: [5484, 5614, 7007, 9869, 6697, 10226], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.2, borderWidth: 3 }
                    ]
                },
                options: globalChartOptions({
                    tooltip: { callbacks: { label: (c) => `${c.dataset.label}: R$ ${c.raw}` } }
                })
            });
        }
        
        const prefeitasData = [
            { cidade: "Araruama, RJ", nome: "Daniela de Livia (Daniela Cuinse Abreu)", lat: -22.873, lon: -42.343 },
            { cidade: "Barra do Piraí, RJ", nome: "Katia Miki", lat: -22.470, lon: -43.825 },
            { cidade: "Cantagalo, RJ", nome: "Manuela", lat: -21.982, lon: -42.368 },
            { cidade: "Cardoso Moreira, RJ", nome: "Geane Vincler", lat: -21.492, lon: -41.623 },
            { cidade: "Guapimirim, RJ", nome: "Marina Rocha (Marina do Modelo)", lat: -22.531, lon: -42.982 },
            { cidade: "Japeri, RJ", nome: "Dra Fernanda Ontiveros", lat: -22.642, lon: -43.653 },
            { cidade: "Miracema, RJ", nome: "Alessandra Freire", lat: -21.411, lon: -42.196 },
            { cidade: "Quissamã, RJ", nome: "Fátima Pacheco", lat: -22.106, lon: -41.472 },
            { cidade: "São Francisco de Itabapoana, RJ", nome: "Yara Cinthia", lat: -21.472, lon: -41.115 },
            { cidade: "São João da Barra, RJ", nome: "Carla Caputi", lat: -21.640, lon: -41.051 },
            { cidade: "São Sebastião do Alto, RJ", nome: "Claudiane Pietrani", lat: -21.968, lon: -42.115 },
            { cidade: "Saquarema, RJ", nome: "Lucimar (Lucimar Pereira Vidal da Costa)", lat: -22.921, lon: -42.509 },
            { cidade: "Silva Jardim, RJ", nome: "Maira Figueiredo", lat: -22.648, lon: -42.392 },
            { cidade: "Vassouras, RJ", nome: "Rosi (Rosilane Almeida Piv T Pontes)", lat: -22.404, lon: -43.662 }
        ];

        function createMapaChart() {
            if (!window.leafletMapInstance) {
                drawMap();
            } else {
                setTimeout(() => {
                    window.leafletMapInstance.invalidateSize();
                }, 100);
            }
        }
        
        function drawMap() {
            try {
                const mapContainer = document.getElementById('map_chart_div');
                mapContainer.innerHTML = ''; 
                
                const centroRJ = [-22.25, -42.6];
                
                window.leafletMapInstance = L.map('map_chart_div', {
                    scrollWheelZoom: false 
                }).setView(centroRJ, 8); 

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(window.leafletMapInstance);

                prefeitasData.forEach(info => {
                    const popupHtml = `
                        <div class="font-sans">
                            <p class="font-bold text-base text-slate-700">${info.cidade.replace(', RJ', '')}</p> 
                            <p class="text-sm" style="color: ${corMulheres};">
                                Prefeita
                            </p>
                            <p class="text-xs text-slate-500">${info.nome}</p>
                        </div>`;
                    
                    L.marker([info.lat, info.lon])
                        .addTo(window.leafletMapInstance)
                        .bindPopup(popupHtml);
                });

            } catch (e) {
                console.error("Erro ao desenhar o mapa Leaflet:", e);
                document.getElementById('map_chart_div').innerHTML = "Erro ao carregar o mapa.";
            }
        }
        
        window.addEventListener('DOMContentLoaded', () => {
            allPanels.forEach(panel => {
                if (!panel.classList.contains('active-panel')) {
                    panel.classList.add('hidden', 'opacity-0');
                }
            });
            
            const initialPanel = document.querySelector('.active-panel');
            if (initialPanel) {
                setTimeout(() => {
                    triggerAnimations(initialPanel);
                }, 100); 
            }
            
            createInicioCharts();
        });

    </script>

</body>
</html>
