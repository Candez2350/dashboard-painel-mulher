<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard (Refined) | Disparidade de Gênero</title>
    <!-- 1. Carrega o Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. Carrega o Chart.js (biblioteca de gráficos) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <!-- 3. Carrega o Leaflet CSS e JS (Substituindo Google Charts) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <!-- =================================================== -->
    <!-- 4. Fontes e Estilos Visuais Personalizados          -->
    <!-- =================================================== -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- Definição da Paleta de Cores Centralizada (TEMA LIGHT LILÁS) --- */
        :root {
            /* Cores de Gênero */
            --color-mulheres: #fb7185; /* rose-400 */
            --color-mulheres-border: #f43f5e; /* rose-500 */
            --color-homens: #64748b; /* slate-500 */
            --color-homens-border: #475569; /* slate-600 */
            
            /* Cores do Tema (LIGHT LILÁS) */
            --color-accent: #8b5cf6; /* violet-500 */
            --color-accent-shadow: rgba(139, 92, 246, 0.3); 
            --color-bg-body: #f5f3ff; /* violet-50 */
            --color-bg-sidebar: #ffffff; 
            --color-bg-card: #ffffff; 
            --color-border-card: #ede9fe; /* violet-100 */
            --color-border-divider: #ddd6fe; /* violet-200 */

            /* Cores de Texto */
            --color-text-primary: #1e293b; /* slate-800 */
            --color-text-secondary: #475569; /* slate-600 */
            --color-text-tertiary: #64748b; /* slate-500 */
            --color-text-muted: #94a3b8; /* slate-400 */
            
            /* Cores de KPI */
            --color-kpi-negative: #ef4444; /* red-500 */
            --color-kpi-positive: #10b981; /* emerald-500 */
            --color-kpi-warning: #f59e0b; /* amber-500 */
        }
        
        /* --- Estilo base --- */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--color-bg-body);
            color: var(--color-text-secondary);
        }

        /* --- Estilos para a Sidebar --- */
        .sidebar-button {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            width: 100%;
            text-align: left;
            transition: all 0.3s ease;
            cursor: pointer;
            padding: 0.75rem 1.5rem;
            border-left: 4px solid transparent;
            color: var(--color-text-tertiary);
            font-size: 0.95rem;
            font-weight: 500;
            border-radius: 0.5rem;
        }
        .sidebar-button:hover {
            color: var(--color-text-primary);
            background-color: rgba(0, 0, 0, 0.03);
        }
        .active-tab {
            border-left-color: var(--color-accent);
            color: var(--color-accent);
            font-weight: 600;
            background-color: rgba(139, 92, 246, 0.05);
        }
        .sidebar-button svg {
            width: 1.25rem; height: 1.25rem; flex-shrink: 0;
            stroke: currentColor; stroke-width: 2; fill: none;
            transition: all 0.3s ease;
        }
        .active-tab svg {
            fill: var(--color-accent-shadow);
            stroke: var(--color-accent);
        }

        /* --- Estilos para Cards --- */
        .kpi-card, .chart-card {
            background-color: var(--color-bg-card);
            border: 1px solid var(--color-border-card);
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
            transition: all 0.3s ease-in-out;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.04), 0 0 20px var(--color-accent-shadow);
        }
        
        /* --- Tipografia --- */
        .h1-title { font-size: 1.75rem; font-weight: 800; color: var(--color-text-primary); letter-spacing: -0.025em; }
        .h2-title { font-size: 1.875rem; font-weight: 700; color: var(--color-text-primary); letter-spacing: -0.025em; margin-bottom: 1.5rem; }
        .h3-title { font-size: 1.25rem; font-weight: 600; color: var(--color-text-secondary); margin-bottom: 1rem; }
        .kpi-title { font-size: 0.875rem; font-weight: 500; color: var(--color-text-tertiary); margin-bottom: 0.5rem; }
        .kpi-value { font-size: 2.25rem; font-weight: 700; }
        .kpi-subtitle { font-size: 0.75rem; color: var(--color-text-muted); margin-top: 0.25rem; }

        /* --- Animações --- */
        .kpi-value-animated { font-variant-numeric: tabular-nums; }
        .tab-panel { transition: opacity 0.4s ease-in-out; }
        .tab-panel:not(.active-panel) { opacity: 0; display: none; }
        
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card-animate {
            animation: fade-in-up 0.5s ease-out forwards;
            opacity: 0; 
        }
        
        .animated-gradient-text {
            background: linear-gradient(90deg, var(--color-text-primary), var(--color-accent), var(--color-text-primary));
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient-flow 5s ease infinite;
        }
        @keyframes gradient-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06), 0 0 20px var(--color-accent-shadow); }
            50% { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.04), 0 0 35px var(--color-accent-shadow); }
        }
        .impact-glow {
            animation: fade-in-up 0.5s ease-out forwards, pulse-glow 2.5s ease-in-out infinite;
            animation-delay: inherit, 0.7s; 
        }

        /* --- Table Styles --- */
        .custom-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }
        .custom-table th, .custom-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--color-border-card);
        }
        .custom-table th {
            background-color: #f8fafc; /* slate-50 */
            font-weight: 600;
            color: var(--color-text-secondary);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            position: sticky;
            top: 0;
        }
        .custom-table tbody tr:hover {
            background-color: #f5f3ff; /* violet-50 hover */
        }
        .custom-table td {
            color: var(--color-text-primary);
            font-size: 0.9rem;
        }
        .custom-table td:first-child {
            font-weight: 500;
            color: var(--color-text-secondary);
        }
        
        /* Mapa Leaflet */
        .leaflet-container {
            border-radius: 0.75rem;
            z-index: 0; /* Evita sobrepor o menu */
        }
    </style>
</head>
<body class="font-sans">

    <!-- Sidebar Overlay (Mobile) -->
    <div id="sidebar-overlay" onclick="toggleSidebar(false)" class="fixed inset-0 z-20 bg-black bg-opacity-50 hidden lg:hidden"></div>

    <!-- Sidebar -->
    <aside id="sidebar" class="w-64 h-screen p-6 flex flex-col flex-shrink-0 fixed top-0 left-0 z-30 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out" style="background-color: var(--color-bg-sidebar);">
        <header class="mb-8">
            <div class="mb-4">
                <svg class="h-10 w-10" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                    <rect width="18" height="28" rx="2" fill="var(--color-text-tertiary)" transform="translate(0 12)"/>
                    <rect width="18" height="18" rx="2" fill="var(--color-accent)" transform="translate(22 22)"/>
                </svg>
            </div>
            <h1 class="h1-title animated-gradient-text">Análise de Gênero</h1>
            <p class="text-sm" style="color: var(--color-text-tertiary);">Dashboard de Disparidade</p>
        </header>

        <nav id="tab-navigation" class="flex flex-col gap-2">
            <button class="sidebar-button active-tab" onclick="showTab('inicio', this)">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                <span>Início</span>
            </button>
            <button class="sidebar-button" onclick="showTab('educacao', this)">
                <!-- Ícone Graduation Cap -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
                <span>Educação</span>
            </button>
            <button class="sidebar-button" onclick="showTab('renda', this)">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>
                <span>Emprego e Renda</span>
            </button>
            <button class="sidebar-button" onclick="showTab('jornada', this)">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                <span>Cuidado</span>
            </button>
            <button class="sidebar-button" onclick="showTab('poder', this)">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m16 16 3-8 3 8c-.8.9-2 1-3 1-1 0-2.1-.1-3-1Z"></path><path d="m2 16 3-8 3 8c-.8.9-2 1-3 1-1 0-2.1-.1-3-1Z"></path><path d="M12 3v18"></path><path d="M7 12h10"></path></svg>
                <span>Poder Público</span>
            </button>
            <!-- Botão para Liderança -->
            <button class="sidebar-button" onclick="showTab('lideranca', this)">
                <!-- Ícone Users/Briefcase (Gestão) -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                <span>Liderança e Gestão</span>
            </button>
            <button class="sidebar-button" onclick="showTab('mapa', this)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
                <span>Representação feminina nas Prefeituras</span>
            </button>
        </nav>
        
        <div class="mt-auto text-xs" style="color: var(--color-text-muted);">
            <p>© 2025. Dados (2016-2025)</p>
        </div>
    </aside>

    <!-- Mobile Header -->
    <header class="sticky top-0 z-10 lg:hidden flex items-center justify-between p-4" style="background-color: var(--color-bg-card); border-bottom: 1px solid var(--color-border-card);">
        <h1 id="mobile-title" class="text-lg font-semibold" style="color: var(--color-text-primary);">Início</h1>
        <button onclick="toggleSidebar(true)" class="p-2 rounded-md" style="color: var(--color-text-tertiary);">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </button>
    </header>

    <!-- Main Content -->
    <main class="lg:ml-64 h-screen overflow-y-auto">
        <div id="main-content" class="p-4 md:p-8">

            <!-- Aba 1: Início -->
            <div id="inicio" class="tab-panel active-panel opacity-100">
                <div class="chart-card mb-8 card-animate"> 
                    <h2 class="text-2xl font-semibold text-slate-800 mb-3">Bem-vindo(a) ao Painel de Disparidade de Gênero</h2>
                    <p class="text-slate-600 leading-relaxed">
                        Este dashboard centraliza indicadores-chave que ilustram as diferenças nas esferas de trabalho, renda, educação e vida social entre homens e mulheres no Brasil.
                        Use o menu ao lado para se aprofundar em cada tema. O objetivo é fornecer dados claros para embasar discussões e a formulação de políticas públicas.
                    </p>
                </div>

                <!-- KPIs Principais -->
                <h2 class="h2-title card-animate" style="animation-delay: 100ms;">Visão Geral (2022-2025)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="kpi-card card-animate impact-glow" style="animation-delay: 200ms;">
                        <h3 class="kpi-title">Diferença no Rendimento</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="-24.4" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">Rendimento das mulheres vs homens (2º tri 2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;">
                        <h3 class="kpi-title">Diferença em Afazeres (sem)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="7.6" data-prefix="+" data-suffix="h">+0,0h</p>
                        <p class="kpi-subtitle">Horas a mais dedicadas por mulheres (2022)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 400ms;">
                        <h3 class="kpi-title">Taxa de Ocupação (2º tri 2025)</h3>
                        <div class="flex items-baseline gap-4 mt-2">
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-mulheres);">M:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-mulheres);" data-value="52.5" data-suffix="%">0,0%</p></div>
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-homens);">H:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-homens);" data-value="72.4" data-suffix="%">0,0%</p></div>
                        </div>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 500ms;">
                        <h3 class="kpi-title">Gap no Ensino Superior (18-24)</h3>
                        <div class="flex items-baseline gap-4 mt-2">
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-mulheres);">M:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-mulheres);" data-value="31.5" data-suffix="%">0,0%</p></div>
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-homens);">H:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-homens);" data-value="23.0" data-suffix="%">0,0%</p></div>
                        </div>
                    </div>
                </div>

                <!-- Contexto Estrutural -->
                <h2 class="h2-title card-animate" style="animation-delay: 600ms;">Contexto Estrutural e Tendências</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 700ms;">
                        <h3 class="kpi-title">Gap na Força de Trabalho</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="-895" data-suffix=" mil">-0 mil</p>
                        <p class="kpi-subtitle">Mulheres a menos no mercado (2º tri 2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 800ms;">
                        <h3 class="kpi-title">Diferença Afazeres (Não Ocupadas)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="8.3" data-prefix="+" data-suffix="h">+0,0h</p>
                        <p class="kpi-subtitle">Horas a mais p/ mulheres *fora* do mercado</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 900ms;">
                        <h3 class="kpi-title">Aumento do Gap Salarial</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="235" data-prefix="+R$ ">+R$ 0</p>
                        <p class="kpi-subtitle">Aumento da diferença (2T 2023-2T 2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 1000ms;">
                        <h3 class="kpi-title">Prefeitas no RJ (2025)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="15.2" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">Apenas 14 de 92 prefeituras</p>
                    </div>
                </div>
                
                <!-- Gráfico de Evolução da População Feminina -->
                <div class="chart-card card-animate mb-8" style="animation-delay: 1100ms;">
                    <h3 class="h3-title">Evolução da População Feminina Residente (Estimada)</h3>
                    <div class="h-[300px] relative">
                        <canvas id="populacaoFemininaChart"></canvas>
                    </div>
                </div>

                <!-- Tabela de População por Grupo Etário -->
                <div class="chart-card card-animate" style="animation-delay: 1200ms;">
                    <h3 class="h3-title">Detalhamento Demográfico: Mulheres por Faixa Etária (Mil pessoas)</h3>
                    <p class="text-slate-500 text-sm mb-4">Evolução histórica da população feminina residente no Estado do Rio de Janeiro.</p>
                    <div class="overflow-x-auto rounded-lg border border-slate-100">
                        <table class="custom-table" id="tabelaPopulacao">
                            <thead>
                                <tr>
                                    <th>Grupo Etário</th>
                                    <th>2016</th>
                                    <th>2017</th>
                                    <th>2018</th>
                                    <th>2019</th>
                                    <th>2022</th>
                                    <th>2023</th>
                                    <th>2024</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Preenchido via JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>

            <!-- Aba 2: Educação -->
            <div id="educacao" class="tab-panel">
                <h2 class="h2-title card-animate">Educação: O Paradoxo da Qualificação</h2>
                <p class="text-slate-600 mb-6 card-animate">
                    As mulheres no Rio de Janeiro estudam mais, têm menos analfabetismo e acessam mais o ensino superior. 
                    Apesar disso, a disparidade salarial persiste, indicando que a educação sozinha não elimina as barreiras de gênero.
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 100ms;">
                        <h3 class="kpi-title">Média Anos de Estudo (15+)</h3>
                        <div class="flex items-baseline gap-4 mt-2">
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-mulheres);">M:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-mulheres);" data-value="11.2" data-suffix=" anos">0.0</p></div>
                            <div class="flex items-baseline gap-1"><span class="text-2xl font-bold" style="color: var(--color-homens);">H:</span><p class="text-2xl font-bold kpi-value-animated" style="color: var(--color-homens);" data-value="11.1" data-suffix=" anos">0.0</p></div>
                        </div>
                        <p class="kpi-subtitle">Dados de 2024 (Mulheres lideram desde 2016)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 200ms;">
                        <h3 class="kpi-title">Frequência Superior (18-24 anos)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-positive);" data-value="8.5" data-prefix="+" data-suffix=" p.p.">+0.0 p.p.</p>
                        <p class="kpi-subtitle">Vantagem feminina no acesso à universidade (2024)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;">
                        <h3 class="kpi-title">Mulheres com Superior Completo</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-mulheres);" data-value="1.75" data-suffix=" mi">0 mi</p>
                        <p class="kpi-subtitle">Crescimento de 57% desde 2016</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 400ms;">
                        <h3 class="kpi-title">Mulheres Analfabetas (15+)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="154" data-suffix=" mil">0 mil</p>
                        <p class="kpi-subtitle">vs 134 mil homens (2024)</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div class="chart-card card-animate" style="animation-delay: 400ms;">
                        <h3 class="h3-title">Evolução: Média de Anos de Estudo (15+)</h3>
                        <div class="h-[300px] relative">
                            <canvas id="anosEstudoChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 500ms;">
                        <h3 class="h3-title">Taxa Ajustada Frequência Superior (18-24 anos)</h3>
                        <div class="h-[300px] relative">
                            <canvas id="freqSuperiorChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 600ms;">
                        <h3 class="h3-title">Evolução do Analfabetismo (15 anos ou mais)</h3>
                        <div class="h-[300px] relative">
                            <canvas id="analfabetismoChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 700ms;">
                        <h3 class="h3-title">Evolução do Nível Superior Completo (Absoluto)</h3>
                        <div class="h-[300px] relative">
                            <canvas id="superiorAbsolutoChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aba 3: Emprego e Renda -->
            <div id="renda" class="tab-panel">
                <h2 class="h2-title card-animate">Emprego e Renda</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 100ms;">
                        <h3 class="kpi-title">Diferença de Rendimento</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="-24.4" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">(2º tri 2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 200ms;">
                        <h3 class="kpi-title">Diferença na Ocupação</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="-19.9" data-suffix=" p.p.">0,0 p.p.</p>
                        <p class="kpi-subtitle">(2º tri 2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;">
                        <h3 class="kpi-title">Diferença na Informalidade</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="4.0" data-prefix="+" data-suffix=" p.p.">+0,0 p.p.</p>
                        <p class="kpi-subtitle">(2º tri 2025)</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div class="chart-card card-animate" style="animation-delay: 400ms;">
                        <h3 class="h3-title">Evolução do Rendimento Médio (2023-2025)</h3>
                        <div class="h-[300px] relative"><canvas id="rendimentoChart"></canvas></div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 500ms;">
                        <h3 class="h3-title">Evolução da Taxa de Ocupação (2023-2025)</h3>
                        <div class="h-[300px] relative"><canvas id="ocupacaoChart"></canvas></div>
                    </div>
                    <div class="chart-card lg:col-span-2 card-animate" style="animation-delay: 600ms;">
                        <h3 class="h3-title">Evolução da Taxa de Informalidade (2023-2025)</h3>
                        <div class="h-[300px] relative"><canvas id="informalidadeChart"></canvas></div>
                    </div>
                </div>
            </div>
            
            <!-- Aba 4: Dupla Jornada -->
            <div id="jornada" class="tab-panel">
                <h2 class="h2-title card-animate">Cuidado</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 100ms;">
                        <h3 class="kpi-title">Horas Semanais a Mais (2022)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="7.6" data-prefix="+" data-suffix="h">+0,0h</p>
                        <p class="kpi-subtitle">Dedicadas por mulheres a afazeres</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 200ms;">
                        <h3 class="kpi-title">Taxa de Afazeres (25-49 anos)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-mulheres);" data-value="94.7" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">vs. 87,7% dos homens (2022)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;">
                        <h3 class="kpi-title">Taxa de Afazeres (Sup. completo)</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-mulheres);" data-value="92.2" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">vs. 87,2% dos homens (2022)</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <div class="chart-card lg:col-span-3 card-animate" style="animation-delay: 400ms;">
                        <h3 class="h3-title">Horas Semanais em Afazeres (2018-2022)</h3>
                        <div class="h-[300px] relative"><canvas id="afazeresChart"></canvas></div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 500ms;">
                        <h3 class="h3-title">Taxa de Afazeres por Instrução (2022)</h3>
                        <div class="h-[300px] relative"><canvas id="instrucaoChart"></canvas></div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 600ms;">
                        <h3 class="h3-title">Taxa de Afazeres por Idade (2022)</h3>
                        <div class="h-[300px] relative"><canvas id="idadeChart"></canvas></div>
                    </div>
                </div>
            </div>
            
            <!-- Aba 5: Poder Público (Cargos Eletivos) -->
            <div id="poder" class="tab-panel">
                <h2 class="h2-title card-animate">Representação Política (Cargos Eletivos)</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 100ms;">
                        <h3 class="kpi-title">Mulheres no Executivo RJ</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="20.6" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">7 de 34 cargos (2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 200ms;">
                        <h3 class="kpi-title">Mulheres na ALERJ</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="22.9" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">16 de 70 deputadas (2025)</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;">
                        <h3 class="kpi-title">Mulheres no TJRJ</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-warning);" data-value="41.2" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">77 de 187 desembargadores(as) (2025)</p>
                    </div>
                     <div class="kpi-card card-animate" style="animation-delay: 400ms;">
                        <h3 class="kpi-title">Mulheres em Prefeituras</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="15.2" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">14 de 92 prefeitas (2025)</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-12">
                    <div class="chart-card card-animate" style="animation-delay: 500ms;">
                        <h3 class="h3-title text-center">Evolução Executivo RJ (2021 vs 2025)</h3>
                        <div class="h-[350px] relative"><canvas id="executivoChart"></canvas></div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 600ms;">
                        <h3 class="h3-title text-center">Evolução ALERJ (2021 vs 2025)</h3>
                        <div class="h-[350px] relative"><canvas id="alerjChart"></canvas></div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 700ms;">
                        <h3 class="h3-title text-center">Evolução Prefeituras (2021 vs 2025)</h3>
                        <div class="h-[350px] relative"><canvas id="prefeiturasChart"></canvas></div>
                    </div>
                    <div class="chart-card card-animate" style="animation-delay: 800ms;">
                        <h3 class="h3-title text-center">Composição TJRJ (2025)</h3>
                        <div class="h-[350px] relative"><canvas id="tjrjChart"></canvas></div>
                    </div>
                </div>
            </div>
            
            <!-- Aba 6: Liderança e Gestão (Atualizada) -->
            <div id="lideranca" class="tab-panel">
                <h2 class="h2-title card-animate">Liderança e Gestão Pública (Série Histórica)</h2>
                <p class="text-slate-600 mb-6 card-animate">
                    Análise da representatividade em cargos de alto escalão administrativo e o "gap" salarial em posições de chefia.
                </p>
                
                <!-- SUBSTITUÍDO: KPI por Gráfico de Linha -->
                <div class="grid grid-cols-1 gap-6 mb-8">
                     <div class="chart-card card-animate" style="animation-delay: 100ms;">
                        <h3 class="h3-title">Evolução do Gap Salarial na Gestão (Diferença Homem - Mulher)</h3>
                        <div class="h-[250px] relative"><canvas id="gapChefiaChart"></canvas></div>
                        <p class="text-xs text-slate-400 mt-2">Diferença em Reais (R$) a favor dos homens em cargos gerenciais no RJ.</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Gráfico 1: Ministérios e Câmara -->
                    <div class="chart-card card-animate" style="animation-delay: 200ms;">
                        <h3 class="h3-title">Evolução da Representatividade Feminina (%)</h3>
                        <div class="h-[300px] relative"><canvas id="historicoPoliticoChart"></canvas></div>
                    </div>

                    <!-- Gráfico 2: Cargos Gerenciais RJ -->
                    <div class="chart-card card-animate" style="animation-delay: 300ms;">
                        <h3 class="h3-title">Proporção em Cargos Gerenciais - RJ (%)</h3>
                        <div class="h-[300px] relative"><canvas id="historicoGerencialChart"></canvas></div>
                    </div>

                    <!-- Gráfico 3: Rendimento Gestão -->
                    <div class="chart-card lg:col-span-2 card-animate" style="animation-delay: 400ms;">
                        <h3 class="h3-title">Rendimento Médio em Cargos de Gestão - RJ (R$)</h3>
                        <div class="h-[300px] relative"><canvas id="historicoRendaGestaoChart"></canvas></div>
                    </div>
                </div>
            </div>

            <!-- Aba 7: Mapa Político -->
            <div id="mapa" class="tab-panel">
                <h2 class="h2-title card-animate">Representação feminina: Prefeituras RJ (2025)</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="kpi-card card-animate" style="animation-delay: 100ms;">
                        <h3 class="kpi-title">Total de Prefeituras</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-text-primary);" data-value="92">0</p>
                        <p class="kpi-subtitle">Municípios no RJ</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 200ms;">
                        <h3 class="kpi-title">Prefeitas Mulheres</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-mulheres);" data-value="14">0</p>
                        <p class="kpi-subtitle">vs. 78 Prefeitos Homens</p>
                    </div>
                    <div class="kpi-card card-animate" style="animation-delay: 300ms;">
                        <h3 class="kpi-title">% de Mulheres no Executivo</h3>
                        <p class="kpi-value kpi-value-animated" style="color: var(--color-kpi-negative);" data-value="15.2" data-suffix="%">0,0%</p>
                        <p class="kpi-subtitle">Ocupando prefeituras em 2025</p>
                    </div>
                </div>
                <div class="chart-card card-animate" style="animation-delay: 400ms;">
                    <h3 class="h3-title">Distribuição de Gênero nas Prefeituras do RJ</h3>
                    <div id="map_chart_div" class="w-full min-h-[500px] md:min-h-[650px] relative z-0">
                        <div class="flex items-center justify-center h-full text-slate-500">Carregando mapa...</div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <script>
        const cssVars = getComputedStyle(document.documentElement);
        const corMulheres = cssVars.getPropertyValue('--color-mulheres') || '#fb7185';
        const corHomens = cssVars.getPropertyValue('--color-homens') || '#64748b';
        const corBordaMulheres = cssVars.getPropertyValue('--color-mulheres-border') || '#f43f5e';
        const corBordaHomens = cssVars.getPropertyValue('--color-homens-border') || '#475569';
        const corGrid = cssVars.getPropertyValue('--color-border-divider') || '#ddd6fe';
        const corTexto = cssVars.getPropertyValue('--color-text-secondary') || '#475569';
        const corTooltipBg = cssVars.getPropertyValue('--color-bg-card') || '#ffffff';
        const corTooltipTitle = cssVars.getPropertyValue('--color-text-primary') || '#1e293b';
        const corTooltipBorder = cssVars.getPropertyValue('--color-border-card') || '#ede9fe';
        const corBgCard = cssVars.getPropertyValue('--color-bg-card') || '#ffffff';
        const corAccent = cssVars.getPropertyValue('--color-accent') || '#8b5cf6'; 
        const corKpiNegative = cssVars.getPropertyValue('--color-kpi-negative') || '#ef4444';

        const globalChartOptions = (plugins = {}, scales = {}) => ({
            responsive: true, maintainAspectRatio: false,
            animation: { duration: 1000, easing: 'easeInOutCubic' },
            plugins: {
                legend: { position: 'top', labels: { color: corTexto, font: { size: 12 }, padding: 20 } },
                tooltip: { backgroundColor: corTooltipBg, titleColor: corTooltipTitle, bodyColor: corTexto, borderColor: corTooltipBorder, borderWidth: 1, padding: 10, cornerRadius: 6, displayColors: true, boxPadding: 4 },
                ...plugins
            },
            scales: {
                x: { ticks: { color: corTexto, font: { size: 10 } }, grid: { color: corGrid, drawBorder: false }, ...scales.x },
                y: { ticks: { color: corTexto, font: { size: 10 } }, grid: { color: corGrid, drawBorder: false }, ...scales.y }
            }
        });

        window.chartInstances = {};
        const allPanels = document.querySelectorAll('.tab-panel');
        const allButtons = document.querySelectorAll('.sidebar-button');

        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        const mobileTitle = document.getElementById('mobile-title');

        function toggleSidebar(forceOpen = null) {
            if (!sidebar || !overlay) return;
            const isOpen = sidebar.classList.contains('translate-x-0');
            if (forceOpen === true || (forceOpen === null && !isOpen)) {
                sidebar.classList.remove('-translate-x-full'); sidebar.classList.add('translate-x-0'); overlay.classList.remove('hidden');
            } else {
                sidebar.classList.add('-translate-x-full'); sidebar.classList.remove('translate-x-0'); overlay.classList.add('hidden');
            }
        }

        function showTab(tabId, element) {
            const targetPanel = document.getElementById(tabId);
            if (!targetPanel) return;

            allButtons.forEach(button => button.classList.remove('active-tab'));
            element.classList.add('active-tab');

            if (mobileTitle) {
                const span = element.querySelector('span');
                if (span) mobileTitle.textContent = span.textContent;
            }

            allPanels.forEach(panel => {
                if (panel.id === tabId) {
                    panel.classList.remove('hidden'); panel.classList.add('active-panel'); void panel.offsetWidth; panel.classList.remove('opacity-0'); panel.classList.add('opacity-100');
                } else {
                    panel.classList.remove('active-panel', 'opacity-100'); panel.classList.add('opacity-0');
                    setTimeout(() => { if (!panel.classList.contains('active-panel')) panel.classList.add('hidden'); }, 400);
                }
            });

            if (tabId === 'renda') createRendaCharts();
            else if (tabId === 'jornada') createJornadaCharts();
            else if (tabId === 'poder') createPoderChart();
            else if (tabId === 'lideranca') createLiderancaCharts();
            else if (tabId === 'educacao') createEducacaoCharts();
            else if (tabId === 'mapa') createMapaChart();
            else if (tabId === 'inicio') createInicioCharts();
            
            setTimeout(() => triggerAnimations(targetPanel), 100);
            if (window.innerWidth < 1024) toggleSidebar(false);
        }
        
        function animateCountUp(el) {
            const targetValue = parseFloat(el.dataset.value);
            if (isNaN(targetValue)) return;
            const duration = 1500; const prefix = el.dataset.prefix || ''; const suffix = el.dataset.suffix || '';
            let start = null; const startValue = 0;
            const step = (timestamp) => {
                if (!start) start = timestamp;
                const progress = Math.min((timestamp - start) / duration, 1);
                let currentValue = startValue + (targetValue - startValue) * progress * (2 - progress);
                let textValue;
                if (Math.abs(targetValue) > 0 && Math.abs(targetValue) < 1) textValue = currentValue.toFixed(1);
                else if (targetValue % 1 !== 0) textValue = currentValue.toFixed(1);
                else textValue = currentValue.toFixed(0);
                if (textValue === '-0,0' || textValue === '-0') textValue = '0';
                el.textContent = `${prefix}${String(textValue).replace('.', ',')}${suffix}`;
                if (progress < 1) window.requestAnimationFrame(step);
                else el.textContent = `${prefix}${String(targetValue).replace('.', ',')}${suffix}`;
            };
            window.requestAnimationFrame(step);
        }

        function triggerAnimations(panel) {
            if (!panel) return;
            panel.querySelectorAll('.kpi-value-animated').forEach(animateCountUp);
            const cards = panel.querySelectorAll('.card-animate');
            cards.forEach((card, index) => {
                card.style.animation = 'none'; void card.offsetWidth;
                if (card.classList.contains('impact-glow')) card.style.animationDelay = `${index * 100}ms, ${index * 100 + 500}ms`;
                else card.style.animationDelay = `${index * 100}ms`;
                card.style.animation = '';
            });
        }

        // --- Gráficos da Página Inicial ---
        function createInicioCharts() {
            if (window.chartInstances.populacaoFemininaChart) window.chartInstances.populacaoFemininaChart.destroy();

            const ctx = document.getElementById('populacaoFemininaChart')?.getContext('2d');
            if (ctx) {
                window.chartInstances.populacaoFemininaChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['2016', '2017', '2018', '2019', '2022', '2023', '2024'],
                        datasets: [{
                            label: 'População Feminina (Milhões - Estimado)',
                            data: [8.6, 8.65, 8.7, 8.75, 8.8, 8.85, 8.9], 
                            borderColor: corBordaMulheres,
                            backgroundColor: 'rgba(251, 113, 133, 0.1)',
                            fill: true,
                            tension: 0.4,
                            borderWidth: 3,
                            pointRadius: 4
                        }]
                    },
                    options: globalChartOptions({
                        tooltip: { callbacks: { label: (c) => `${c.dataset.label}: ${c.raw} milhões` } }
                    })
                });
            }

            const tabelaBody = document.querySelector('#tabelaPopulacao tbody');
            if (tabelaBody) {
                tabelaBody.innerHTML = ''; 
                const popData = [
                    { grupo: "0 a 3 anos", dados: [394, 386, 404, 397, 333, 368, 393] },
                    { grupo: "4 a 5 anos", dados: [219, 194, 194, 197, 206, 201, 203] },
                    { grupo: "6 a 9 anos", dados: [397, 387, 384, 397, 405, 384, 415] },
                    { grupo: "10 a 14 anos", dados: [539, 500, 496, 507, 485, 497, 516] },
                    { grupo: "15 a 17 anos", dados: [346, 349, 343, 307, 317, 321, 321] },
                    { grupo: "18 a 24 anos", dados: [900, 946, 896, 886, 921, 852, 784] },
                    { grupo: "25 a 29 anos", dados: [677, 637, 681, 653, 646, 665, 661] }
                ];

                popData.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${row.grupo}</td>
                        ${row.dados.map(val => `<td>${val}</td>`).join('')}
                    `;
                    tabelaBody.appendChild(tr);
                });
            }
        }

        // --- Gráficos da Aba Educação ---
        function createEducacaoCharts() {
            if (window.chartInstances.anosEstudoChart) window.chartInstances.anosEstudoChart.destroy();
            if (window.chartInstances.freqSuperiorChart) window.chartInstances.freqSuperiorChart.destroy();
            if (window.chartInstances.superiorAbsolutoChart) window.chartInstances.superiorAbsolutoChart.destroy();
            if (window.chartInstances.analfabetismoChart) window.chartInstances.analfabetismoChart.destroy();

            const ctx1 = document.getElementById('anosEstudoChart').getContext('2d');
            window.chartInstances.anosEstudoChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['2016', '2017', '2018', '2019', '2022', '2023', '2024'],
                    datasets: [
                        { label: 'Mulheres', data: [10.1, 10.3, 10.6, 10.8, 11.1, 11.2, 11.2], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.2, borderWidth: 3, pointRadius: 3 },
                        { label: 'Homens', data: [10.1, 10.3, 10.6, 10.7, 11.0, 11.2, 11.1], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.2, borderWidth: 3, pointRadius: 3 }
                    ]
                },
                options: globalChartOptions({ tooltip: { callbacks: { label: (c) => `${c.dataset.label}: ${c.raw} anos` } } }, { y: { min: 9, title: { display: true, text: 'Média de Anos' } } })
            });

            const ctx2 = document.getElementById('freqSuperiorChart').getContext('2d');
            window.chartInstances.freqSuperiorChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['2016', '2017', '2018', '2019', '2022', '2023', '2024'],
                    datasets: [
                        { label: 'Mulheres', data: [26.3, 20.5, 25.9, 31.8, 27.4, 28.8, 31.5], backgroundColor: corMulheres, borderRadius: 4 },
                        { label: 'Homens', data: [21.2, 20.5, 21.9, 23.0, 21.0, 22.7, 23.0], backgroundColor: corHomens, borderRadius: 4 }
                    ]
                },
                options: globalChartOptions()
            });

            const ctx4 = document.getElementById('analfabetismoChart').getContext('2d');
            window.chartInstances.analfabetismoChart = new Chart(ctx4, {
                type: 'line',
                data: {
                    labels: ['2016', '2017', '2018', '2019', '2022', '2023', '2024'],
                    datasets: [
                        { label: 'Mulheres (Mil)', data: [194, 183, 177, 147, 170, 158, 154], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.3, borderWidth: 3 },
                        { label: 'Homens (Mil)', data: [148, 153, 134, 126, 143, 132, 134], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.3, borderWidth: 3 }
                    ]
                },
                options: globalChartOptions()
            });
            
            const ctx3 = document.getElementById('superiorAbsolutoChart').getContext('2d');
            window.chartInstances.superiorAbsolutoChart = new Chart(ctx3, {
                type: 'line',
                data: {
                    labels: ['2016', '2017', '2018', '2019', '2022', '2023', '2024'],
                    datasets: [
                        { label: 'Mulheres (Mil)', data: [1119, 1166, 1331, 1468, 1748, 1759, 1757], borderColor: corBordaMulheres, backgroundColor: 'rgba(251, 113, 133, 0.1)', fill: true, tension: 0.3, borderWidth: 3 },
                        { label: 'Homens (Mil)', data: [802, 843, 902, 1014, 1074, 1135, 1195], borderColor: corBordaHomens, backgroundColor: 'transparent', tension: 0.3, borderWidth: 3, borderDash: [5, 5] }
                    ]
                },
                options: globalChartOptions()
            });
        }

        // --- Gráficos Renda, Jornada e Poder (Existentes) ---
        function createRendaCharts() {
            if (window.chartInstances.rendimentoChart) window.chartInstances.rendimentoChart.destroy();
            if (window.chartInstances.ocupacaoChart) window.chartInstances.ocupacaoChart.destroy();
            if (window.chartInstances.informalidadeChart) window.chartInstances.informalidadeChart.destroy();

            const ctx1 = document.getElementById('rendimentoChart').getContext('2d');
            window.chartInstances.rendimentoChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['1º tri 2023', '2º tri 2023', '3º tri 2023', '4º tri 2023', '1º tri 2024', '2º tri 2024', '3º tri 2024', '4º tri 2024', '1º tri 2025', '2º tri 2025'],
                    datasets: [
                        { label: 'Mulheres', data: [3306, 3261, 3319, 3228, 3229, 3228, 3175, 3236, 3439, 3456], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.2, fill: false, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 },
                        { label: 'Homens', data: [4156, 4142, 4287, 4171, 4318, 4331, 4267, 4180, 4477, 4572], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.2, fill: false, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 }
                    ]
                },
                options: globalChartOptions()
            });

            const ctx3 = document.getElementById('ocupacaoChart').getContext('2d');
            window.chartInstances.ocupacaoChart = new Chart(ctx3, {
                type: 'line',
                data: {
                    labels: ['1º tri 2023', '2º tri 2023', '3º tri 2023', '4º tri 2023', '1º tri 2024', '2º tri 2024', '3º tri 2024', '4º tri 2024', '1º tri 2025', '2º tri 2025'],
                    datasets: [
                        { label: 'Mulheres', data: [51.1, 51.5, 51.9, 52.8, 53.1, 52.6, 52.1, 52.4, 52.5, 52.5], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.2, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 },
                        { label: 'Homens', data: [70.5, 70.8, 71.1, 71.6, 71.6, 71.8, 71.6, 71.3, 71.7, 72.4], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.2, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 }
                    ]
                },
                options: globalChartOptions()
            });

            const ctx4 = document.getElementById('informalidadeChart').getContext('2d');
            window.chartInstances.informalidadeChart = new Chart(ctx4, {
                type: 'line',
                data: {
                    labels: ['1º tri 2023', '2º tri 2023', '3º tri 2023', '4º tri 2023', '1º tri 2024', '2º tri 2024', '3º tri 2024', '4º tri 2024', '1º tri 2025', '2º tri 2025'],
                    datasets: [
                        { label: 'Mulheres', data: [37.0, 38.0, 38.4, 39.1, 39.4, 39.5, 39.5, 39.7, 38.7, 39.9], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.2, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 },
                        { label: 'Homens', data: [36.1, 36.6, 37.1, 37.0, 37.4, 36.8, 36.6, 37.1, 36.0, 35.9], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.2, borderWidth: 3, pointRadius: 2, pointHoverRadius: 5 }
                    ]
                },
                options: globalChartOptions()
            });
        }

        function createJornadaCharts() {
            if (window.chartInstances.afazeresChart) window.chartInstances.afazeresChart.destroy();
            if (window.chartInstances.instrucaoChart) window.chartInstances.instrucaoChart.destroy();
            if (window.chartInstances.idadeChart) window.chartInstances.idadeChart.destroy();

            const ctx2 = document.getElementById('afazeresChart').getContext('2d');
            window.chartInstances.afazeresChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['2018', '2019', '2022'],
                    datasets: [
                        { label: 'Mulheres', data: [21.4, 20.6, 20.1], backgroundColor: corMulheres, borderRadius: 4 },
                        { label: 'Homens', data: [12.5, 11.9, 12.5], backgroundColor: corHomens, borderRadius: 4 }
                    ]
                },
                options: globalChartOptions()
            });

            const ctx5 = document.getElementById('instrucaoChart').getContext('2d');
            window.chartInstances.instrucaoChart = new Chart(ctx5, {
                type: 'bar',
                data: {
                    labels: ['Sem instrução', 'Fund. completo', 'Médio completo', 'Superior completo'],
                    datasets: [
                        { label: 'Mulheres', data: [87.4, 90.0, 92.4, 92.2], backgroundColor: corMulheres, borderRadius: 4 },
                        { label: 'Homens', data: [78.9, 81.5, 86.6, 87.2], backgroundColor: corHomens, borderRadius: 4 }
                    ]
                },
                options: globalChartOptions({}, { x: { ticks: { font: { size: 8 } } } })
            });

            const ctx6 = document.getElementById('idadeChart').getContext('2d');
            window.chartInstances.idadeChart = new Chart(ctx6, {
                type: 'bar',
                data: {
                    labels: ['14 a 24 anos', '25 a 49 anos', '50 anos ou mais'],
                    datasets: [
                        { label: 'Mulheres', data: [84.9, 94.7, 89.3], backgroundColor: corMulheres, borderRadius: 4 },
                        { label: 'Homens', data: [72.9, 87.7, 84.9], backgroundColor: corHomens, borderRadius: 4 }
                    ]
                },
                options: globalChartOptions()
            });
        }
        
        function createPoderChart() {
            if (window.chartInstances.executivoChart) window.chartInstances.executivoChart.destroy();
            if (window.chartInstances.alerjChart) window.chartInstances.alerjChart.destroy();
            if (window.chartInstances.prefeiturasChart) window.chartInstances.prefeiturasChart.destroy();
            if (window.chartInstances.tjrjChart) window.chartInstances.tjrjChart.destroy();

            const groupedBarOptions = (title) => globalChartOptions({ title: { display: false, text: title, color: corTexto }, tooltip: { callbacks: { label: function(context) { return `${context.dataset.label}: ${context.raw.toFixed(1)}%`; } } } }, { x: { stacked: false }, y: { stacked: false, ticks: { callback: (value) => value + '%' } } });
            const doughnutOptions = (title) => ({ responsive: true, maintainAspectRatio: false, cutout: '70%', animation: { animateRotate: true, animateScale: true, duration: 1200 }, plugins: { legend: { position: 'bottom', labels: { color: corTexto, padding: 15 } }, title: { display: false, text: title, color: corTexto }, tooltip: { callbacks: { label: function(context) { let label = context.label || ''; if (label) { label += ': '; } if (context.parsed !== null) { label += context.parsed.toFixed(1) + '%'; } return label; } } } }, scales: { x: { display: false }, y: { display: false } } });

            const ctx_exec = document.getElementById('executivoChart').getContext('2d');
            window.chartInstances.executivoChart = new Chart(ctx_exec, { type: 'bar', data: { labels: ['2021', '2025'], datasets: [{ label: 'Mulheres', data: [7.1, 20.6], backgroundColor: corMulheres, borderRadius: 4 }, { label: 'Homens', data: [92.9, 79.4], backgroundColor: corHomens, borderRadius: 4 }] }, options: groupedBarOptions('Evolução Executivo RJ') });

            const ctx_alerj = document.getElementById('alerjChart').getContext('2d');
            window.chartInstances.alerjChart = new Chart(ctx_alerj, { type: 'bar', data: { labels: ['2021', '2025'], datasets: [{ label: 'Mulheres', data: [21.4, 22.9], backgroundColor: corMulheres, borderRadius: 4 }, { label: 'Homens', data: [78.6, 77.1], backgroundColor: corHomens, borderRadius: 4 }] }, options: groupedBarOptions('Evolução ALERJ') });

            const ctx_pref = document.getElementById('prefeiturasChart').getContext('2d');
            window.chartInstances.prefeiturasChart = new Chart(ctx_pref, { type: 'bar', data: { labels: ['2021', '2025'], datasets: [{ label: 'Mulheres', data: [8.7, 15.2], backgroundColor: corMulheres, borderRadius: 4 }, { label: 'Homens', data: [91.3, 84.8], backgroundColor: corHomens, borderRadius: 4 }] }, options: groupedBarOptions('Evolução Prefeituras') });

            const ctx_tjrj = document.getElementById('tjrjChart').getContext('2d');
            window.chartInstances.tjrjChart = new Chart(ctx_tjrj, { type: 'doughnut', data: { labels: ['Mulheres', 'Homens'], datasets: [{ data: [41.2, 58.8], backgroundColor: [corMulheres, corHomens], borderColor: [corBgCard, corBgCard], borderWidth: 4 }] }, options: doughnutOptions('Composição TJRJ (2025)') });
        }

        // --- Gráficos da Aba Liderança ---
        function createLiderancaCharts() {
            if (window.chartInstances.gapChefiaChart) window.chartInstances.gapChefiaChart.destroy();
            if (window.chartInstances.historicoPoliticoChart) window.chartInstances.historicoPoliticoChart.destroy();
            if (window.chartInstances.historicoGerencialChart) window.chartInstances.historicoGerencialChart.destroy();
            if (window.chartInstances.historicoRendaGestaoChart) window.chartInstances.historicoRendaGestaoChart.destroy();

            // NOVO: Gráfico de Evolução do Gap Salarial
            const ctx_gap = document.getElementById('gapChefiaChart').getContext('2d');
            window.chartInstances.gapChefiaChart = new Chart(ctx_gap, {
                type: 'line',
                data: {
                    labels: ['2017', '2018', '2019', '2020', '2021', '2022'],
                    datasets: [
                        { 
                            label: 'Gap Salarial (R$ a favor dos homens)', 
                            data: [2344, 3857, 2583, 2877, 3281, 1714], 
                            borderColor: corKpiNegative, 
                            backgroundColor: corKpiNegative, 
                            tension: 0.3, 
                            borderWidth: 3,
                            pointRadius: 4
                        }
                    ]
                },
                options: globalChartOptions({
                     tooltip: { callbacks: { label: (c) => `${c.dataset.label}: R$ ${c.raw}` } }
                }, { y: { title: { display: true, text: 'Diferença em Reais (R$)' } } })
            });

            // 1. Histórico Político (Ministérios vs Câmara)
            const ctx_hist_pol = document.getElementById('historicoPoliticoChart').getContext('2d');
            window.chartInstances.historicoPoliticoChart = new Chart(ctx_hist_pol, {
                type: 'line',
                data: {
                    labels: ['2017', '2020', '2023'],
                    datasets: [
                        { label: 'Ministérios (Brasil)', data: [4.5, 11.8, 25.0], borderColor: corAccent, backgroundColor: corAccent, tension: 0.3, borderWidth: 3 },
                        { label: 'Câmara Deputados (RJ)', data: [13.0, 21.7, 19.1], borderColor: corMulheres, backgroundColor: corMulheres, tension: 0.3, borderWidth: 3, borderDash: [5, 5] }
                    ]
                },
                options: globalChartOptions({
                     tooltip: { callbacks: { label: (c) => `${c.dataset.label}: ${c.raw}%` } }
                }, { y: { min: 0, ticks: { callback: (v) => v + '%' } } })
            });

            // 2. Histórico Gerencial (RJ)
            const ctx_hist_ger = document.getElementById('historicoGerencialChart').getContext('2d');
            window.chartInstances.historicoGerencialChart = new Chart(ctx_hist_ger, {
                type: 'bar',
                data: {
                    labels: ['2017', '2018', '2019', '2020', '2021', '2022'],
                    datasets: [
                        { label: 'Mulheres', data: [39.9, 43.4, 42.0, 37.8, 34.6, 37.8], backgroundColor: corMulheres, borderRadius: 4 },
                        { label: 'Homens', data: [60.1, 56.6, 58.0, 62.2, 65.4, 62.2], backgroundColor: corHomens, borderRadius: 4 }
                    ]
                },
                options: globalChartOptions({}, { x: { stacked: true }, y: { stacked: true, max: 100 } })
            });

            // 3. Histórico Renda Gestão (RJ)
            const ctx_hist_renda = document.getElementById('historicoRendaGestaoChart').getContext('2d');
            window.chartInstances.historicoRendaGestaoChart = new Chart(ctx_hist_renda, {
                type: 'line',
                data: {
                    labels: ['2017', '2018', '2019', '2020', '2021', '2022'],
                    datasets: [
                        { label: 'Homens (R$)', data: [7829, 9471, 9590, 12746, 9978, 11940], borderColor: corBordaHomens, backgroundColor: corHomens, tension: 0.2, borderWidth: 3 },
                        { label: 'Mulheres (R$)', data: [5484, 5614, 7007, 9869, 6697, 10226], borderColor: corBordaMulheres, backgroundColor: corMulheres, tension: 0.2, borderWidth: 3 }
                    ]
                },
                options: globalChartOptions({
                    tooltip: { callbacks: { label: (c) => `${c.dataset.label}: R$ ${c.raw}` } }
                })
            });
        }
        
        const prefeitasData = [
            { cidade: "Araruama, RJ", nome: "Daniela de Livia (Daniela Cuinse Abreu)", lat: -22.873, lon: -42.343 },
            { cidade: "Barra do Piraí, RJ", nome: "Katia Miki", lat: -22.470, lon: -43.825 },
            { cidade: "Cantagalo, RJ", nome: "Manuela", lat: -21.982, lon: -42.368 },
            { cidade: "Cardoso Moreira, RJ", nome: "Geane Vincler", lat: -21.492, lon: -41.623 },
            { cidade: "Guapimirim, RJ", nome: "Marina Rocha (Marina do Modelo)", lat: -22.531, lon: -42.982 },
            { cidade: "Japeri, RJ", nome: "Dra Fernanda Ontiveros", lat: -22.642, lon: -43.653 },
            { cidade: "Miracema, RJ", nome: "Alessandra Freire", lat: -21.411, lon: -42.196 },
            { cidade: "Quissamã, RJ", nome: "Fátima Pacheco", lat: -22.106, lon: -41.472 },
            { cidade: "São Francisco de Itabapoana, RJ", nome: "Yara Cinthia", lat: -21.472, lon: -41.115 },
            { cidade: "São João da Barra, RJ", nome: "Carla Caputi", lat: -21.640, lon: -41.051 },
            { cidade: "São Sebastião do Alto, RJ", nome: "Claudiane Pietrani", lat: -21.968, lon: -42.115 },
            { cidade: "Saquarema, RJ", nome: "Lucimar (Lucimar Pereira Vidal da Costa)", lat: -22.921, lon: -42.509 },
            { cidade: "Silva Jardim, RJ", nome: "Maira Figueiredo", lat: -22.648, lon: -42.392 },
            { cidade: "Vassouras, RJ", nome: "Rosi (Rosilane Almeida Piv T Pontes)", lat: -22.404, lon: -43.662 }
        ];

        function createMapaChart() {
            if (!window.leafletMapInstance) {
                drawMap();
            } else {
                setTimeout(() => {
                    window.leafletMapInstance.invalidateSize();
                }, 100);
            }
        }
        
        function drawMap() {
            try {
                const mapContainer = document.getElementById('map_chart_div');
                mapContainer.innerHTML = ''; 
                
                const centroRJ = [-22.25, -42.6];
                
                window.leafletMapInstance = L.map('map_chart_div', {
                    scrollWheelZoom: false 
                }).setView(centroRJ, 8); 

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(window.leafletMapInstance);

                prefeitasData.forEach(info => {
                    const popupHtml = `
                        <div class="font-sans">
                            <p class="font-bold text-base text-slate-700">${info.cidade.replace(', RJ', '')}</p> 
                            <p class="text-sm" style="color: ${corMulheres};">
                                Prefeita
                            </p>
                            <p class="text-xs text-slate-500">${info.nome}</p>
                        </div>`;
                    
                    L.marker([info.lat, info.lon])
                        .addTo(window.leafletMapInstance)
                        .bindPopup(popupHtml);
                });

            } catch (e) {
                console.error("Erro ao desenhar o mapa Leaflet:", e);
                document.getElementById('map_chart_div').innerHTML = "Erro ao carregar o mapa.";
            }
        }
        
        window.addEventListener('DOMContentLoaded', () => {
            allPanels.forEach(panel => {
                if (!panel.classList.contains('active-panel')) {
                    panel.classList.add('hidden', 'opacity-0');
                }
            });
            
            const initialPanel = document.querySelector('.active-panel');
            if (initialPanel) {
                setTimeout(() => {
                    triggerAnimations(initialPanel);
                }, 100); 
            }
            
            createInicioCharts();
        });

    </script>

</body>
</html>
